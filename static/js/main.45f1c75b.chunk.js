/*! For license information please see main.45f1c75b.chunk.js.LICENSE.txt */
(this["webpackJsonplastikStok-tun4tun"]=this["webpackJsonplastikStok-tun4tun"]||[]).push([[0],{132:function(e,t,a){e.exports=a.p+"static/media/team-1-800x800.53033970.jpg"},235:function(e,t,a){e.exports=a.p+"static/media/argon-react.f38ddea9.png"},247:function(e,t,a){e.exports=a(574)},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},470:function(e,t,a){e.exports=a.p+"static/media/profile-cover.e2582654.jpg"},480:function(e,t){},481:function(e,t){},482:function(e,t){},484:function(e,t){},486:function(e,t){},518:function(e,t){},519:function(e,t){},571:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=571},572:function(e,t){},573:function(e,t,a){e.exports=a.p+"static/media/argon-react-white.275a2629.png"},574:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(21),r=a.n(s),i=a(601),o=a(603),c=a(246),m=a(602),d=(a(252),a(253),a(254),a(577)),h=a(129),u=a(576),p=a(578),E=a(604),g=a(579),b=a(580),k=a(581),y=a(582);class f extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main"},n.a.createElement(d.a,{fluid:!0},n.a.createElement(h.a,{className:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",to:"/"},this.props.brandText),n.a.createElement(p.a,{className:"align-items-center d-none d-md-flex",navbar:!0},n.a.createElement(E.a,{nav:!0},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},n.a.createElement("img",{alt:"...",src:a(132)})),n.a.createElement(b.a,{className:"ml-2 d-none d-lg-block"},n.a.createElement("span",{className:"mb-0 text-sm font-weight-bold"},"Emre \xc7\xd6MEZ")))),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},n.a.createElement(y.a,{className:"noti-title",header:!0,tag:"div"},n.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-single-02"}),n.a.createElement("span",null,"My profile")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-settings-gear-65"}),n.a.createElement("span",null,"Settings")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-calendar-grid-58"}),n.a.createElement("span",null,"Activity")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-support-16"}),n.a.createElement("span",null,"Support")),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,{href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("i",{className:"ni ni-user-run"}),n.a.createElement("span",null,"Logout"))))))))}}var v=f,N=a(583),S=a(584),F=a(585),C=a(586);class x extends n.a.Component{render(){return n.a.createElement("footer",{className:"footer"},n.a.createElement(N.a,{className:"align-items-center justify-content-xl-between"},n.a.createElement(S.a,{xl:"6"},n.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"\xa9 2018"," ",n.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Creative Tim"))),n.a.createElement(S.a,{xl:"6"},n.a.createElement(p.a,{className:"nav-footer justify-content-center justify-content-xl-end"},n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://www.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Creative Tim")),n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://www.creative-tim.com/presentation?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"About Us")),n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"http://blog.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Blog")),n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"MIT License"))))))}}var M=x,w=a(587),T=a(588),A=a(239),O=a(589),D=a(590),z=a(591),B=a(592),I=a(240);class Y extends n.a.Component{constructor(e){super(e),this.state={collapseOpen:!1},this.toggleCollapse=()=>{this.setState({collapseOpen:!this.state.collapseOpen})},this.closeCollapse=()=>{this.setState({collapseOpen:!1})},this.createLinks=e=>e.map((e,t)=>n.a.createElement(F.a,{key:t},n.a.createElement(C.a,{to:e.layout+e.path,tag:w.a,onClick:this.closeCollapse,activeClassName:"active"},n.a.createElement("i",{className:e.icon}),e.name))),this.activeRoute.bind(this)}activeRoute(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}render(){const e=this.props,t=(e.bgColor,e.routes),l=e.logo;let s;return l&&l.innerLink?s={to:l.innerLink,tag:h.a}:l&&l.outterLink&&(s={href:l.outterLink,target:"_blank"}),n.a.createElement(u.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main"},n.a.createElement(d.a,{fluid:!0},n.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},n.a.createElement("span",{className:"navbar-toggler-icon"})),l?n.a.createElement(T.a,Object.assign({className:"pt-0"},s),n.a.createElement("img",{alt:l.imgAlt,className:"navbar-brand-img",src:l.imgSrc})):null,n.a.createElement(p.a,{className:"align-items-center d-md-none"},n.a.createElement(E.a,{nav:!0},n.a.createElement(g.a,{nav:!0,className:"nav-link-icon"},n.a.createElement("i",{className:"ni ni-bell-55"})),n.a.createElement(k.a,{"aria-labelledby":"navbar-default_dropdown_1",className:"dropdown-menu-arrow",right:!0},n.a.createElement(y.a,null,"Action"),n.a.createElement(y.a,null,"Another action"),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,null,"Something else here"))),n.a.createElement(E.a,{nav:!0},n.a.createElement(g.a,{nav:!0},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},n.a.createElement("img",{alt:"...",src:a(132)})))),n.a.createElement(k.a,{className:"dropdown-menu-arrow",right:!0},n.a.createElement(y.a,{className:"noti-title",header:!0,tag:"div"},n.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-single-02"}),n.a.createElement("span",null,"My profile")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-settings-gear-65"}),n.a.createElement("span",null,"Settings")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-calendar-grid-58"}),n.a.createElement("span",null,"Activity")),n.a.createElement(y.a,{to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-support-16"}),n.a.createElement("span",null,"Support")),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,{href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("i",{className:"ni ni-user-run"}),n.a.createElement("span",null,"Logout"))))),n.a.createElement(A.a,{navbar:!0,isOpen:this.state.collapseOpen},n.a.createElement("div",{className:"navbar-collapse-header d-md-none"},n.a.createElement(N.a,null,l?n.a.createElement(S.a,{className:"collapse-brand",xs:"6"},l.innerLink?n.a.createElement(h.a,{to:l.innerLink},n.a.createElement("img",{alt:l.imgAlt,src:l.imgSrc})):n.a.createElement("a",{href:l.outterLink},n.a.createElement("img",{alt:l.imgAlt,src:l.imgSrc}))):null,n.a.createElement(S.a,{className:"collapse-close",xs:"6"},n.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},n.a.createElement("span",null),n.a.createElement("span",null))))),n.a.createElement(O.a,{className:"mt-4 mb-3 d-md-none"},n.a.createElement(D.a,{className:"input-group-rounded input-group-merge"},n.a.createElement(z.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),n.a.createElement(B.a,{addonType:"prepend"},n.a.createElement(I.a,null,n.a.createElement("span",{className:"fa fa-search"}))))),n.a.createElement(p.a,{navbar:!0},this.createLinks(t)),n.a.createElement("hr",{className:"my-3"}),n.a.createElement("h6",{className:"navbar-heading text-muted"},"Documentation"),n.a.createElement(p.a,{className:"mb-md-3",navbar:!0},n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://demos.creative-tim.com/argon-dashboard-react/documentation/overview?ref=adr-admin-sidebar"},n.a.createElement("i",{className:"ni ni-spaceship"}),"Getting started")),n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://demos.creative-tim.com/argon-dashboard-react/documentation/colors?ref=adr-admin-sidebar"},n.a.createElement("i",{className:"ni ni-palette"}),"Foundation")),n.a.createElement(F.a,null,n.a.createElement(C.a,{href:"https://demos.creative-tim.com/argon-dashboard-react/documentation/alerts?ref=adr-admin-sidebar"},n.a.createElement("i",{className:"ni ni-ui-04"}),"Components"))))))}}Y.defaultProps={routes:[{}]};var j=Y,R=(a(5),a(35)),P=a.n(R),L=a(131),_=a(599),K=a(593),V=a(594),U=a(595),H=a(596),W=(a(168),a(40)),q=a.n(W);const J=a(35),G=["Oca","\u015eub","Mar","Nis","May","Haz","Tem","A\u011fu","Eyl","Eki","Kas","Ara"];J.elements.Rectangle.prototype.draw=function(){var e,t,a,l,n,s,r,i=this._chart.ctx,o=this._view,c=o.borderWidth;if(o.horizontal?(e=o.base,t=o.x,a=o.y-o.height/2,l=o.y+o.height/2,n=t>e?1:-1,s=1,r=o.borderSkipped||"left"):(e=o.x-o.width/2,t=o.x+o.width/2,a=o.y,n=1,s=(l=o.base)>a?1:-1,r=o.borderSkipped||"bottom"),c){var m=Math.min(Math.abs(e-t),Math.abs(a-l)),d=(c=c>m?m:c)/2,h=e+("left"!==r?d*n:0),u=t+("right"!==r?-d*n:0),p=a+("top"!==r?d*s:0),E=l+("bottom"!==r?-d*s:0);h!==u&&(a=p,l=E),p!==E&&(e=h,t=u)}i.beginPath(),i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=c;var g=[[e,l],[e,a],[t,a],[t,l]],b=["bottom","left","top","right"].indexOf(r,0);function k(e){return g[(b+e)%4]}-1===b&&(b=0);var y=k(0);i.moveTo(y[0],y[1]);for(var f=1;f<4;f++){y=k(f);let e=f+1;4===e&&(e=0);let t=g[2][0]-g[1][0],a=g[0][1]-g[1][1],l=g[1][0],n=g[1][1];var v;(v=6)>a/2&&(v=a/2),v>t/2&&(v=t/2),i.moveTo(l+v,n),i.lineTo(l+t-v,n),i.quadraticCurveTo(l+t,n,l+t,n+v),i.lineTo(l+t,n+a-v),i.quadraticCurveTo(l+t,n+a,l+t-v,n+a),i.lineTo(l+v,n+a),i.quadraticCurveTo(l,n+a,l,n+a-v),i.lineTo(l,n+v),i.quadraticCurveTo(l,n,l+v,n)}i.fill(),c&&i.stroke()};var X="Open Sans",Z={100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},Q={default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},$="#FFFFFF",ee="transparent";function te(){let e=[],t=new Date,a=t.getMonth(),l=t.getFullYear();for(let n=a-12;n<=a;n++){let t,a;n<0?(t=n+12,a=l-1):(t=n,a=l);let s=G[t].concat("'").concat(String(a).substring(2));e.push(s)}return e}Z[900],Z[900],Z[900],Z[900];let ae={options:{scales:{yAxes:[{gridLines:{color:Z[900],zeroLineColor:Z[900]},ticks:{callback:function(e){if(!(e%10))return"\u20ba"+e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",l=e.yLabel,n="";return t.datasets.length>1&&(n+=a),n+="\u20ba"+l}}}},data:{labels:te(),datasets:[{label:"Satislar",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]}]}},le={options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",l=e.yLabel,n="";return t.datasets.length>1&&(n+=a),n+=l}}}},data:{labels:te(),datasets:[{label:"Satislar",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]}]}};var ne=a(19);class se extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"header bg-gradient-info pb-6 pt-5 pt-md-8"},n.a.createElement(d.a,{fluid:!0},n.a.createElement("div",{className:"header-body"}))))}}var re=se;a(139);const ie=ne.c.initializeDefaultAppClient("lastikpark-ogewz").getServiceClient(ne.b.factory,"mongodb-atlas").db("lastikParkDB");class oe extends n.a.Component{constructor(...e){super(...e),this.state={activeNav:1,chartExample1Data:"data1",chartAylikCiroBazliOrnek:"data1",barChart:le,lineChart:ae,tires:[],filterArrayMarka:[],filterApplied:{}},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartAylikCiroBazliOrnek:"data1"===this.state.chartAylikCiroBazliOrnek?"data2":"data1"});let a=()=>{console.log(this.state)};a.bind(this),setTimeout(()=>a(),1e3)},this.getStockData=e=>{ie.collection("stockCollection").find(e).toArray().then(e=>{console.log("chats DB Results:",e);[...new Set(e.map(e=>e.marka))].sort();this.setState({tires:e})}).catch(console.error)},this.findAylikBazliSatislar=()=>{let e={},t={},a=[],l=[],n=function(){let e=[],t=new Date,a=t.getMonth(),l=t.getFullYear();for(let n=a-12;n<=a;n++){let t,a;n<0?(t=n+12,a=l-1):(t=n,a=l),t+=1;let s=String(t).length>1?String(a).substr(2).concat(String(t)):String(a).substr(2).concat("0").concat(String(t));console.log("YaXis: ",s),e.push(s)}return console.log("xXx:",e),e}();return ie.collection("salesCollection").find().toArray().then(s=>{console.log("chats DB Results:",s),s.forEach(a=>{let l=String(a.tarih).substr(8,2).concat(String(a.tarih).substr(3,2));console.log("Aylar varki: ",l),e[l]?e[l]=e[l]+a.satisAdet:e[l]=a.satisAdet,t[l]?t[l]=t[l]+a.satisAdet*a.birimFiyat:t[l]=a.satisAdet*a.birimFiyat}),n.forEach(n=>{n=Number(n);let s=e[n];a.push(s),l.push(t[n])}),console.log("yYy: ",a),le.data.datasets[0].data=a,ae.data.datasets[0].data=l,console.log(ae),this.setState({barChart:le})}).catch(console.error),a},this.applyFilter=e=>{let t={marka:e.currentTarget.textContent};e.currentTarget.textContent.includes("Kald\u0131r")&&delete t.marka,this.getStockData(t),this.setState({filterApplied:t})}}componentWillMount(){window.Chart&&function e(t,a){for(var l in a)"object"!==typeof a[l]?t[l]=a[l]:e(t[l],a[l])}(P.a,function(){var e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:Z[600],defaultFontColor:Z[600],defaultFontFamily:X,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:Q.primary},line:{tension:.4,borderWidth:4,borderColor:Q.primary,backgroundColor:ee,borderCapStyle:"rounded"},rectangle:{backgroundColor:Q.warning},arc:{backgroundColor:Q.primary,borderColor:$,borderWidth:4}},tooltips:{enabled:!0,mode:"index",intersect:!1}},doughnut:{cutoutPercentage:83,legendCallback:function(e){var t=e.data,a="";return t.labels.forEach((function(e,l){var n=t.datasets[0].backgroundColor[l];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+n+'"></i>',a+=e,a+="</span>"})),a}}}};return J.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:Z[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:Z[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),J.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:10}),e}()),this.findAylikBazliSatislar(),this.getStockData(this.state.filterApplied),ie.collection("stockCollection").find().toArray().then(e=>{console.log("chats DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort();this.setState({filterArrayMarka:t})}).catch(console.error)}renderMarkaFilterOptions(){return this.state.filterArrayMarka.map(e=>n.a.createElement(y.a,{key:e,onClick:this.applyFilter},n.a.createElement("span",null,e)))}renderStokTableRows(){return this.state.tires.map((e,t)=>{const l=e.stokAdet/100*100,s=String(e.taban).concat(" / ").concat(String(e.oran)).concat(" / ").concat(e.jant).concat(" / ").concat(e.yukEndeksi).concat(" / ").concat(e.hizEndeksi).concat(" "),r="tooltip".concat(e._id.toString()),i="r".concat(e._id.toString()),o="\n\t Yanak: ".concat(e.yanakYapisi).concat("\n\t Mevsim: ".concat(e.mevsim).concat("\n\t Di\u011fer: ".concat(e.diger))),c=Number.isInteger(e.ortMaliyet)?e.ortMaliyet:e.ortMaliyet.toFixed(2),m=Number.isInteger(e.ortFiyat)?e.ortFiyat:e.ortFiyat.toFixed(2);if(l<=20)var d="fas fa-info-circle text-red",h="fas fa-car-side text-red";else if(l>=21&&l<=80)d="fas fa-info-circle text-info",h="fas fa-car-side text-info";else d="fas fa-info-circle text-green",h="fas fa-car-side text-green";return n.a.createElement("tr",{key:i},n.a.createElement("th",{scope:"row"},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("a",{className:"avatar rounded-circle mr-3",href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("img",{alt:"...",src:a(82)})),n.a.createElement(b.a,null,n.a.createElement("span",{className:"mb-0 text-sm"},e.marka)))),n.a.createElement("td",{className:"text-left"},e.model),n.a.createElement("td",null,n.a.createElement("i",{className:h})," ",s,n.a.createElement("span",null,n.a.createElement("i",{className:d,id:r}),n.a.createElement(_.a,{delay:0,target:r},o))),n.a.createElement("td",null,n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement("span",{className:"mr-2"},e.stokAdet))),n.a.createElement("td",null,"\u20ba",c),n.a.createElement("td",null,"\u20ba",m))})}render(){let e;return e=Object.keys(this.state.filterApplied).length>0?"fas fa-filter text-green":"fas fa-filter",n.a.createElement(n.a.Fragment,null,n.a.createElement(re,null),n.a.createElement(d.a,{className:"mt--7",fluid:!0},n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"mb-5 mb-xl-0",xl:"12"},n.a.createElement(K.a,{className:"bg-gradient-default shadow"},n.a.createElement(V.a,{className:"bg-transparent"},n.a.createElement(N.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Ciro Baz\u0131nda"),n.a.createElement("h2",{className:"text-white mb-0"},"Sat\u0131\u015flar")))),n.a.createElement(U.a,null,n.a.createElement("div",{className:"chart"},n.a.createElement(L.b,{data:ae.data,options:ae.options,getDatasetAtEvent:e=>console.log(e)})))))),n.a.createElement(N.a,{className:"mt-5"},n.a.createElement(S.a,{xl:"12"},n.a.createElement(K.a,{className:"shadow"},n.a.createElement(V.a,{className:"bg-transparent"},n.a.createElement(N.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h6",{className:"text-uppercase text-muted ls-1 mb-1"},"Adet Bazl\u0131"),n.a.createElement("h2",{className:"mb-0"},"Sat\u0131\u015f Say\u0131lar\u0131")))),n.a.createElement(U.a,null,n.a.createElement("div",{className:"chart"},n.a.createElement(L.a,{data:this.state.barChart.data,options:le.options})))))),n.a.createElement(N.a,{className:"mt-5"},n.a.createElement(S.a,{className:"mb-5 mb-xl-0",xl:"12"},n.a.createElement(K.a,{className:"shadow"},n.a.createElement(V.a,{className:"border-0"},n.a.createElement(N.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h3",{className:"mb-0"},"Stok Tablosu")))),n.a.createElement(H.a,{className:"align-items-center table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Marka",n.a.createElement(E.a,{direction:"right"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:e})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},this.renderMarkaFilterOptions(),Object.keys(this.state.filterApplied).length>0&&n.a.createElement(y.a,{divider:!0}),Object.keys(this.state.filterApplied).length>0&&n.a.createElement(y.a,{key:"removeFilter",onClick:this.applyFilter},n.a.createElement("span",null,"Filtreyi Kald\u0131r"))))),n.a.createElement("th",{scope:"col"},"Desen"),n.a.createElement("th",{scope:"col"},"Ebat "),n.a.createElement("th",{scope:"col"},"Adet "),n.a.createElement("th",{scope:"col"},"Ort. Maliyet "),n.a.createElement("th",{scope:"col"},"Ort. Fiyat "))),n.a.createElement("tbody",null,this.renderStokTableRows())))))))}}var ce=oe,me=a(237),de=a(597);n.a.Component;var he=a(244),ue=a.n(he);class pe extends n.a.Component{constructor(e){super(e),this.handleChange=e=>{q()(e,"DD/MM/YYYY",!0).isValid()&&(this.setState({value:e.format("DD/MM/YYYY")}),this.props.onChange(e.format("DD/MM/YYYY")))},this.state={}}componentWillMount(){console.log("xxxDatepicker: ",this.state.className)}componentWillUpdate(){console.log("xxxDatepicker up: ",this.state.className)}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(de.a,null,n.a.createElement(D.a,{className:"input-group-alternative"},n.a.createElement(B.a,{addonType:"prepend"},n.a.createElement(I.a,null,n.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),n.a.createElement(ue.a,{inputProps:{placeholder:this.props.placeholder},timeFormat:!1,closeOnSelect:!0,dateFormat:"DD/MM/YYYY",onChange:this.handleChange,value:this.props.value,className:"is-invalid"}))))}}var Ee=pe;class ge extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(re,null),n.a.createElement(d.a,{className:"mt--7",fluid:!0},n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"order-xl-1",xl:"12"},n.a.createElement(K.a,{className:"bg-secondary shadow"},n.a.createElement(V.a,{className:"bg-white border-0"},n.a.createElement(N.a,{className:"align-items-center"},n.a.createElement(S.a,{xs:"8"},n.a.createElement("h3",{className:"mb-0"},"Yeni Sipari\u015f")),n.a.createElement(S.a,{className:"text-right",xs:"4"},n.a.createElement(me.a,{color:"primary",href:"#pablo",onClick:e=>e.preventDefault(),size:"sm"},"Mevcut Sipari\u015fler")))),n.a.createElement(U.a,null,n.a.createElement(O.a,null,n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Lastik Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{for:"input-marka",className:"form-control-label"},"Marka"),n.a.createElement(z.a,{type:"select",className:"form-control-alternative",id:"input-marka"},n.a.createElement("option",null,"Lastik Markasi Secimi"),n.a.createElement("option",null,"Good Year"),n.a.createElement("option",null,"Michelin"),n.a.createElement("option",null,"Continental")))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{for:"input-marka",className:"form-control-label"},"Ebat"),n.a.createElement(z.a,{type:"select",className:"form-control-alternative",id:"input-ebat"},n.a.createElement("option",null,"Lastik Ebati Secin"),n.a.createElement("option",null,"R16"),n.a.createElement("option",null,"R17"),n.a.createElement("option",null,"R18"),n.a.createElement("option",null,"R19"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"Al\u0131\u015f Fiyat\u0131 (KDV Dahil)"),n.a.createElement(z.a,{className:"form-control-alternative",id:"input-first-name",placeholder:"\u20ba Cinsinden",type:"number"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-last-name"},"Sat\u0131\u015f Fiyat\u0131 (KDV Dahil)"),n.a.createElement(z.a,{className:"form-control-alternative",id:"input-last-name",placeholder:"\u20ba Cinsinden",type:"number"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"Kapora Miktari"),n.a.createElement(z.a,{className:"form-control-alternative",id:"input-first-name",placeholder:"\u20ba Cinsinden",type:"number"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{for:"kaporaSelect",className:"form-control-label"},"Kapora Tipi"),n.a.createElement(z.a,{type:"select",label:"dene",className:"form-control-alternative",id:"kaporaSelect"},n.a.createElement("option",null,"Kapora Tipini Secin"),n.a.createElement("option",null,"Nakit"),n.a.createElement("option",null,"K.Karti")))))),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Teslimat Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Sipari\u015f Nedeni"),n.a.createElement(z.a,{className:"form-control-alternative",id:"input-address",placeholder:"Stok / Kisi Bilgisi",type:"text"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Sipari\u015f Yeri"),n.a.createElement(z.a,{className:"form-control-alternative",id:"input-address",placeholder:"Nereden temin edilecek ?",type:"text"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Telefon Numarasi"),n.a.createElement(z.a,{className:"form-control-alternative",defaultValue:"05",id:"input-city",placeholder:"tel",type:"tel"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Teslimat Tarihi"),n.a.createElement(Ee,{placeholder:"Teslimat Tarihini Secin"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"12"},n.a.createElement(de.a,null,n.a.createElement("label",null,"Notlar"),n.a.createElement(z.a,{className:"form-control-alternative",placeholder:"Ek not varsa buraya ...",rows:"4",type:"textarea"}))))))))))))}}var be=ge;var ke=class{constructor(e){let t=e._id,a=e.owner_id,l=e.marka,n=e.model,s=e.taban,r=e.oran,i=e.jant,o=e.yukEndeksi,c=e.hizEndeksi,m=e.desen,d=e.yanakYapisi,h=e.mevsim,u=e.diger;this._id=t,this.owner_id=a,this.marka=l,this.model=n,this.taban=s,this.oran=r,this.jant=i,this.yukEndeksi=o,this.hizEndeksi=c,this.desen=m,this.yanakYapisi=d,this.mevsim=h,this.diger=u}mainInfo(){return this.marka.concat(" ").concat(this.model).concat(" - ").concat(String(this.taban)).concat(" / ").concat(String(this.oran)).concat(" / ").concat(this.jant).concat(" / ").concat(String(this.yukEndeksi)).concat(" / ").concat(this.hizEndeksi)}otherInfo(){return"\nYanak: ".concat(this.yanakYapisi).concat("\n\t Mevsim: ".concat(this.mevsim).concat("\n\t Di\u011fer: ".concat(this.diger)))}fullInfo(){return this.mainInfo()+" "+this.otherInfo()}idInfoToString(){return this._id.toString()}},ye=a(600);class fe extends l.Component{constructor(e){super(e),this.toggleModal=()=>{this.setState({isOnScreen:!this.state.isOnScreen}),this.props.toggleFunc(this.props.modalStateName)},this.confirmPressed=()=>{this.setState({isOnScreen:!this.state.isOnScreen}),this.props.confirmFunc(this.props.id)},this.state={isOnScreen:e.isOpen,headerTitle:e.headerTitle,mainTitle:e.mainTitle,question:e.question,confirmButtonName:e.confirmButtonName,tire:e.forTire}}componentDidMount(){console.log("Confirmation Modal componentDidMount")}render(){return n.a.createElement(ye.a,{className:"modal-dialog-centered modal-danger",contentClassName:"bg-gradient-danger",isOpen:this.state.isOnScreen,toggle:()=>this.toggleModal(),backdrop:"static"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h6",{className:"modal-title",id:"modal-title-notification"},this.state.headerTitle),n.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},n.a.createElement("span",{"aria-hidden":!0},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"py-3 text-center"},n.a.createElement("i",{className:"ni ni-bell-55 ni-3x"}),n.a.createElement("h4",{className:"heading mt-4"},this.state.mainTitle),n.a.createElement("p",null,this.state.question))),n.a.createElement("div",{className:"modal-footer"},n.a.createElement(me.a,{className:"btn-white",color:"default",type:"button",onClick:()=>this.confirmPressed()},this.state.confirmButtonName),n.a.createElement(me.a,{className:"text-white ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},"Vazge\xe7")))}}class ve extends l.Component{constructor(e){super(e),this.numInputChanged=e=>{console.log("asdasd",e);let t=e.target.id.substring(14),a=Number(e.target.value);a>0&&("birimFiyat"===t||a<=this.state.stokAdeti)&&this.setState({[t]:a})},this.toggleModal=()=>{this.setState({isOnScreen:!this.state.isOnScreen}),this.props.toggleFunc(this.props.modalStateName)},this.dateChanged=e=>{console.log("inputDateChangeCalled : ",e),this.setState({editedDate:e})},this.saveUpdates=()=>{this.setState({isOnScreen:!this.state.isOnScreen});let e=this.props.trx.satisAdet,t=this.props.trx.birimFiyat*this.props.trx.satisAdet;this.props.trx.birimFiyat=Number(document.getElementById("edit-modalTrx-birimFiyat").value),this.props.trx.satisAdet=Number(document.getElementById("edit-modalTrx-satisAdet").value),this.props.trx.tarih=this.state.editedDate,console.log("-i- saveUpdates@ModalEditTrxSatis: new trx: ",this.props.trx),this.props.editFunc(this.props.trx,e,t)},this.state={isOnScreen:e.isOpen,editedDate:e.trx.tarih,birimFiyat:e.trx.birimFiyat,satisAdet:e.trx.satisAdet,stokAdeti:e.trx.satisAdet+e.trx.stokAdeti}}componentWillMount(){console.log("componentWillMount: ModalEditTrx"),console.log("++isOpen ",this.props.trx,this.props.stokAdet)}render(){return n.a.createElement(ye.a,{className:"modal-dialog-centered",isOpen:this.state.isOnScreen},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h3",{className:"modal-title",id:"modal-title-default"},this.props.title),n.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},n.a.createElement("span",{"aria-hidden":!0},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement(O.a,null,n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modalTrx-birimFiyat",className:"form-control-label",sm:"2"},"Birim Fiyat\u0131 (KDV Dahil)"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modalTrx-birimFiyat",placeholder:this.state.birimFiyat,value:this.state.birimFiyat,onChange:this.numInputChanged})),n.a.createElement(S.a,{lg:"6"},n.a.createElement("label",{htmlFor:"edit-modalTrx-satisAdet",className:"form-control-label",sm:"2"},"Adet"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modalTrx-satisAdet",min:"1",max:this.state.stokAdeti,placeholder:this.state.satisAdet,value:this.state.satisAdet,onChange:this.numInputChanged}))),n.a.createElement(de.a,{row:!0,className:"justify-content-md-center"},n.a.createElement(S.a,{sm:"12"},n.a.createElement("label",{htmlFor:"edit-modalTrx-tarih",className:"form-control-label",sm:"3"},"Tarih"),n.a.createElement(Ee,{id:"edit-modalTrx-tarih",className:"form-control-alternative",placeholder:this.props.trx.tarih,value:this.state.editedDate,onChange:this.dateChanged}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{className:"text-left"},n.a.createElement(me.a,{className:"ml-auto",color:"danger","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},"Vazge\xe7")),n.a.createElement(S.a,{className:"text-right",sm:"9"},n.a.createElement(me.a,{color:"primary",type:"button",onClick:()=>this.saveUpdates()},"De\u011fi\u015fiklikleri Kaydet"))))))}}class Ne extends l.Component{constructor(e){super(e),this.addMarkaFilter=e=>{console.log("addFilter@SatisDataTable event: ",e.currentTarget.textContent),this.props.filterFunc({marka:e.currentTarget.textContent})},this.addTarihFilter=e=>{console.log("addFilter@SatisDataTable event: ",e.currentTarget.textContent),this.props.filterFunc({tarih:e.currentTarget.textContent})},this.renderColumnTitles=()=>this.state.columnTitles.map((e,t)=>{var a;console.log(t,e,this.props.filter);let l="thColHdr"+t,s="iFilterId"+t;switch(e){case"Marka":return a=this.props.filter.marka?"fas fa-filter text-green":"fas fa-filter",n.a.createElement("th",{scope:"col",key:l},e,n.a.createElement(E.a,{direction:"right"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:a,id:s})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},this.renderMarkaFilterOptions(),this.props.filter.marka&&n.a.createElement(y.a,{divider:!0}),this.props.filter.marka&&n.a.createElement(y.a,{key:"removeFilter",onClick:this.addMarkaFilter},n.a.createElement("span",null,"Filtreyi Kald\u0131r")))));case"Tarih":return a=this.props.filter.tarih?"fas fa-filter text-green":"fas fa-filter",n.a.createElement("th",{scope:"col",key:l},e,n.a.createElement(E.a,{direction:"right"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:a,id:s})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},this.renderTarihFilterOptions(),this.props.filter.tarih&&n.a.createElement(y.a,{divider:!0}),this.props.filter.tarih&&n.a.createElement(y.a,{key:"removeFilter-tarih",onClick:this.addTarihFilter},n.a.createElement("span",null,"Filtreyi Kald\u0131r")))));default:return n.a.createElement("th",{scope:"col",key:l},e)}}),this.state={columnTitles:e.columnTitles}}componentDidMount(){console.log("DataTable componentDidMount"),console.log("Column headers: ",this.props.isEditModalVisible)}renderMarkaFilterOptions(){return this.props.markaFilterOptions.map(e=>n.a.createElement(y.a,{key:e,onClick:this.addMarkaFilter},n.a.createElement("span",null,e)))}renderTarihFilterOptions(){return this.props.tarihFilterOptions.map(e=>n.a.createElement(y.a,{key:e,onClick:this.addTarihFilter},n.a.createElement("span",null,e)))}renderRows(){return this.props.data.map((e,t)=>{let l=new ke(e),s=e;const r=e._id,i=(e.owner_id,e.marka),o=e.model,c=e.taban,m=e.oran,d=e.jant,h=e.yukEndeksi,u=e.hizEndeksi,p=e.yanakYapisi,f=e.mevsim,v=e.diger,N=e.tarih,S=e.satisAdet,F=e.birimFiyat,C=r,x=String(c).concat(" / ").concat(String(m)).concat(" / ").concat(d).concat(" / ").concat(h).concat(" / ").concat(u),M="tooltip".concat(r.toString()),w="r".concat(r.toString()),T="Yanak: ".concat(p).concat("\n\t\t  Mevsim: ".concat(f).concat("\n\t Di\u011fer: ".concat(v)));console.log("otherinfi:",T);const A=l.mainInfo()+" i\xe7in, \n"+N+" tarihinde\n"+F+"\u20ba fiyat\u0131ndan\n"+S+" adet sat\u0131\u015f i\u015flemi",O=i.concat(" ").concat(o).concat(" - ").concat(x);return n.a.createElement("tr",{key:w},n.a.createElement("th",{scope:"row"},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("a",{className:"avatar rounded-circle mr-3",href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("img",{alt:"...",src:a(82)})),n.a.createElement(b.a,null,n.a.createElement("span",{className:"mb-0 text-sm"},i)))),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},o)),n.a.createElement("td",null,n.a.createElement("i",{className:"fas fa-car-side text-info"})," ",x),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},N)),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},S)),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},F)),n.a.createElement("td",{className:"text-right"},n.a.createElement("span",null,n.a.createElement("i",{className:"fas fa-info-circle text-info",id:M}),n.a.createElement(_.a,{delay:0,target:M},T)),n.a.createElement(E.a,{direction:"left"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:"ni ni-settings text-info"})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},n.a.createElement(y.a,{className:"noti-title",header:!0,tag:"div"},n.a.createElement("h6",{className:"text-overflow m-0"},O)),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,{onClick:()=>this.props.toggleFunc("modalEditSale")},n.a.createElement("i",{className:"fas fa-edit"}),n.a.createElement("span",null,"D\xfczenle"),n.a.createElement(ve,{title:l.mainInfo(),tire:l,modalStateName:this.props.editModalStateName,isOpen:this.props.isEditModalVisible,toggleFunc:this.props.toggleFunc,editFunc:this.props.editFunc,trx:s,maxAdet:this.props.maxAdet})),n.a.createElement(y.a,{onClick:()=>this.props.toggleFunc("modalDeleteSale")},n.a.createElement("i",{className:"fas fa-trash-alt"}),n.a.createElement("span",null,"Sil"),n.a.createElement(fe,{headerTitle:"Dikkat!",mainTitle:A,confirmButtonName:"Onayl\u0131yorum, sil.",question:"Yukarda belirtilen sat\u0131\u015f i\u015flemini envanterden silmek \xfczeresiniz.\nOnayl\u0131yor musunuz?",isOpen:this.props.isConfirmModalVisible,modalStateName:this.props.deleteModalStateName,toggleFunc:this.props.toggleFunc,confirmFunc:this.props.confirmFunc,id:C}))))))})}render(){return n.a.createElement(K.a,{className:"bg-default shadow"},n.a.createElement(V.a,{className:"bg-transparent border-0"},n.a.createElement("h3",{className:"text-white mb-0"},this.props.mainTitle)),n.a.createElement(H.a,{className:"align-items-center table-dark table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,this.renderColumnTitles())),n.a.createElement("tbody",null,this.renderRows())))}}a(194);const Se=ne.c.getAppClient("lastikpark-ogewz"),Fe=Se.getServiceClient(ne.b.factory,"mongodb-atlas").db("lastikParkDB");Se.auth.loginWithCredential(new ne.a).then(e=>{console.log("Logged in as anonymous user with id: ".concat(e.id))}).catch(console.error);var Ce=new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2});class xe extends n.a.Component{constructor(e){super(e),this.adetChanged=e=>{let t,a=this.state.birimFiyat,l=a*e.target.value,n=a/1.18,s=l/1.18;t=0<=e.target.value&&e.target.value<=this.state.stokAdeti?e.target.value:e.target.value>this.state.stokAdeti?this.state.stokAdeti:0,isNaN(e.target.value)&&(t=0),document.getElementById("satis-birim-fiyat-kdvsiz").value=Number.isNaN(n)?"":Ce.format(n),document.getElementById("satis-toplam-fiyat-kdvsiz").value=Number.isNaN(s)?"":Ce.format(s),this.setState({satisAdet:t,toplamFiyat:l})},this.inputBirimChanged=e=>{let t,a,l,n=e.target.value;this.setState(e=>{t=e.toplamFiyat,l=parseInt(e.ortMaliyet),""===n?(t="",a=String("% -")):(t=e.satisAdet>0?n*e.satisAdet:"",""!==l&&(a=((n-l)/l*100).toFixed(2),a=String("% ").concat(a)));let s=n/1.18,r=t/1.18;return document.getElementById("satis-birim-fiyat-kdvsiz").value=Number.isNaN(s)?"":Ce.format(s),document.getElementById("satis-toplam-fiyat-kdvsiz").value=Number.isNaN(r)?"":Ce.format(r),{birimFiyat:n,toplamFiyat:t,karOrani:a}})},this.inputToplamChanged=e=>{let t,a=e.target.value;this.setState(e=>{t=e.birimFiyat,t=""===a?"":e.satisAdet>0?a/e.satisAdet:"";let l=Ce.format(t/1.18),n=Ce.format(a/1.18);return document.getElementById("satis-birim-fiyat-kdvsiz").value=Number.isNaN(l)?"":l,document.getElementById("satis-toplam-fiyat-kdvsiz").value=Number.isNaN(n)?"":n,{birimFiyat:t,toplamFiyat:a}})},this.inputDateChanged=e=>{console.log("inputDateChangeCalled : ",e),this.setState({selectedDate:e})},this.inputSetCorrectlyFor=e=>{let t=!0;if(this.state.saveButtonPressed)switch(e){case"marka":t=""!==this.state.selectedBrand;break;case"model":t=""!==this.state.selectedModel;break;case"taban":t=""!==this.state.selectedTaban;break;case"oran":t=""!==this.state.selectedOran;break;case"jant":t=""!==this.state.selectedJant;break;case"yuk":t=""!==this.state.selectedYuk;break;case"hiz":t=""!==this.state.selectedHiz;break;case"yanak":t=""!==this.state.selectedYanak;break;case"mevsim":t=""!==this.state.selectedMevsim;break;case"diger":t=""!==this.state.selectedOther;break;case"birim":t=""!==this.state.birimFiyat&&0!=this.state.birimFiyat;break;case"adet":t=""!==this.state.satisAdet&&0!=this.state.satisAdet;break;case"toplam":t=""!==this.state.toplamFiyat&&0!=this.state.toplamFiyat}return t},this.allInputsSetCorrectly=()=>{let e=!0,t=[];return""===this.state.selectedBrand&&(t.push("Marka"),e=!1),""===this.state.selectedModel&&(t.push("Desen"),e=!1),""===this.state.selectedTaban&&(t.push("Taban"),e=!1),""===this.state.selectedOran&&(t.push("Oran"),e=!1),""===this.state.selectedJant&&(t.push("Jant"),e=!1),""===this.state.selectedYuk&&(t.push("Yuk Endeksi"),e=!1),""===this.state.selectedHiz&&(t.push("H\u0131z Endeksi"),e=!1),""===this.state.selectedYanak&&(t.push("Yanak"),e=!1),""===this.state.selectedMevsim&&(t.push("Mevsim"),e=!1),""===this.state.selectedOther&&(t.push("Di\u011fer"),e=!1),""!==this.state.birimFiyat&&0!=this.state.birimFiyat||(t.push("Birim-fiyat"),e=!1),""!==this.state.satisAdet&&0!=this.state.satisAdet||(t.push("Adet"),e=!1),""!==this.state.toplamFiyat&&0!=this.state.toplamFiyat||(t.push("Toplam-fiyat"),e=!1),this.setState({saveButtonPressed:!0,wrongInputs:t}),e},this.saveSale=()=>{if(this.allInputsSetCorrectly()){let e,t=this.state.selectedBrand,a=this.state.selectedModel,l=Number(this.state.selectedTaban),n=Number(this.state.selectedOran),s=this.state.selectedJant,r=Number(this.state.selectedYuk),i=this.state.selectedHiz,o=this.state.selectedYanak,c=this.state.selectedMevsim,m=this.state.selectedOther,d=Number(this.state.birimFiyat),h=Number(this.state.satisAdet);if(""===this.state.selectedDate){let t=new Date;e=String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()}else e=this.state.selectedDate;Fe.collection("salesCollection").insertOne({owner_id:Se.auth.user.id,marka:t,model:a,taban:l,oran:n,jant:s,yukEndeksi:r,hizEndeksi:i,yanakYapisi:o,mevsim:c,diger:m,tarih:e,satisAdet:h,birimFiyat:d}).then(e=>{console.log("Insert done with id:",e.insertedId),this.setState({saveButtonPressed:!1}),this.refreshSalesTable(this.state.filterApplied)}).catch(alert(console.error));let u={owner_id:Se.auth.user.id,marka:t,model:a,taban:l,oran:n,jant:s,yukEndeksi:r,hizEndeksi:i,yanakYapisi:o,mevsim:c,diger:m};this.updateStockWithSale(u,d,h)}else alert("Eksik bilgi giri\u015fi yapt\u0131n\u0131z. L\xfctfen giri\u015f yapmad\u0131\u011f\u0131n\u0131z k\u0131rm\u0131z\u0131 ile i\u015faretlenmi\u015f alanlar\u0131 doldurun.")},this.updateStockWithSale=(e,t,a)=>{Fe.collection("stockCollection").find(e).toArray().then(l=>{console.log("Stok:Tire found: ",l);let n=l[0],s=(n.ortFiyat*n.satisAdet+t*a)/(n.satisAdet+a);n.ortFiyat=s,n.satisAdet=n.satisAdet+a,n.stokAdet=n.stokAdet-a,Fe.collection("stockCollection").findOneAndReplace(e,n).then(e=>{console.log("Updated document: ",e),alert("stock table: Updated!!"),this.setState({stokAdeti:n.stokAdet})}).catch(console.error)}).catch(console.error)},this.editSale=(e,t,a)=>{delete e.stokAdeti,Fe.collection("salesCollection").findOneAndReplace({_id:e._id},e).then(l=>{console.log("Updated document after editingSale: ",l),console.log(e);let n={marka:l.marka,model:l.model,taban:l.taban,oran:l.oran,jant:l.jant,yukEndeksi:l.yukEndeksi,hizEndeksi:l.hizEndeksi,yanakYapisi:l.yanakYapisi,mevsim:l.mevsim,diger:l.diger};console.log(n),Fe.collection("stockCollection").findOne(n).then(l=>{l.satisAdet-t+e.satisAdet!==0?l.ortFiyat=(l.ortFiyat*l.satisAdet-a+e.birimFiyat*e.satisAdet)/(l.satisAdet-t+e.satisAdet):l.ortFiyat=0,l.satisAdet=l.satisAdet-t+e.satisAdet,l.stokAdet=l.stokAdet+t-e.satisAdet,Fe.collection("stockCollection").findOneAndReplace(n,l).then(e=>{console.log("Updated document afterPurchase change: ",e),alert("stock table: Updated after Purchase Change!!")}).catch(console.error)}).catch(console.error),this.setState({modalEditSale:!1}),this.refreshSalesTable(this.state.filterApplied)}).catch(console.error)},this.deleteSale=e=>{console.log("Tirewith id '",e.toString(),"'will be deleted from database."),Fe.collection("salesCollection").findOneAndDelete({_id:e}).then(e=>{console.log("Deleted document: ",e);let t={marka:e.marka,model:e.model,taban:e.taban,oran:e.oran,jant:e.jant,yukEndeksi:e.yukEndeksi,hizEndeksi:e.hizEndeksi,yanakYapisi:e.yanakYapisi,mevsim:e.mevsim,diger:e.diger},a=e.birimFiyat,l=e.satisAdet;Fe.collection("stockCollection").findOne(t).then(e=>{console.log("deleteSale Method/ DocumentT2beUpdated: ",e),e.satisAdet-l!==0?e.ortFiyat=(e.ortFiyat*e.satisAdet-a*l)/(e.satisAdet-l):e.ortFiyat=0,e.satisAdet=e.satisAdet-l,e.stokAdet=e.stokAdet+l,Fe.collection("stockCollection").findOneAndReplace(t,e).then(e=>{console.log("Updated document afterSale Deletion: ",e),alert("stock table: Updated after Sale Deletion!!")}).catch(console.error)}).catch(console.error),this.setState({modalDeleteSale:!1}),this.refreshSalesTable(this.state.filterApplied)}).catch(console.error)},this.refreshSalesTable=e=>{Fe.collection("salesCollection").find(e).toArray().then(e=>{e=e.map((e,t)=>{let a={marka:e.marka,model:e.model,taban:e.taban,oran:e.oran,jant:e.jant,yukEndeksi:e.yukEndeksi,hizEndeksi:e.hizEndeksi,yanakYapisi:e.yanakYapisi,mevsim:e.mevsim,diger:e.diger};return console.log(a),Fe.collection("stockCollection").find(a).toArray().then(t=>{e.stokAdeti=t[0].stokAdet,console.log(e)}).catch(console.error),e}),console.log("EVET sonucl results:",e),this.setState({sales:e})}).catch(console.error),console.log("salesArray",this.state.sales),Fe.collection("salesCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.tarih))].sort();this.setState({filterArrayMarka:t,filterArrayTarih:a})}).catch(console.error)},this.anOptionSelected=e=>{let t=String(e.target.id).substring(6),a=e.target.value;this.setState(e=>{let l=e.queryResulted1,n=e.selectedBrand,s=e.selectedModel,r=e.selectedTaban,i=e.selectedOran,o=e.selectedJant,c=e.selectedYuk,m=e.selectedHiz,d=e.selectedYanak,h=e.selectedMevsim,u=e.selectedOther;switch(e.queryResulted1&&(l=!1,n="",s="",r="",i="",o="",c="",m="",d="",h="",u=""),t){case"marka":n=a;break;case"model":s=a;break;case"taban":r=a;break;case"oran":i=a;break;case"jant":o=a;break;case"yuk":c=a;break;case"hiz":m=a;break;case"yanak":d=a;break;case"mevsim":h=a;break;case"diger":u=a}return{selectedBrand:n,selectedModel:s,selectedTaban:r,selectedOran:i,selectedJant:o,selectedYuk:c,selectedHiz:m,selectedYanak:d,selectedMevsim:h,selectedOther:u,queryResulted1:l}});let l=this.state.tireSelected;console.log("===> OptionSelected Before: ",l),a.includes("Se\xe7in")?delete l[t]:l[t]="taban"===t||"oran"===t||"yuk"===t?Number(a):a,console.log("Filter options after new attribute has been added: ",l),Fe.collection("stockCollection").find(l).toArray().then(e=>{if(console.log("DB Results:",e),1==e.length){let t=e[0],a=0!==t.satisAdet?((t.ortFiyat-t.ortMaliyet)/t.ortMaliyet*100).toFixed(2):String("-");a=String("% ").concat(a),t.ortMaliyet=Number.isInteger(t.ortMaliyet)?String(t.ortMaliyet).concat(" \u20ba"):String(t.ortMaliyet.toFixed(2)).concat(" \u20ba"),t.ortFiyat=Number.isInteger(t.ortFiyat)?String(t.ortFiyat).concat(" \u20ba"):String(t.ortFiyat.toFixed(2)).concat(" \u20ba"),this.setState({tireSelected:{},queryResulted1:!0,selectedBrand:t.marka,selectedModel:t.model,selectedTaban:t.taban,selectedOran:t.oran,selectedJant:t.jant,selectedYuk:t.yukEndeksi,selectedHiz:t.hizEndeksi,selectedYanak:t.yanakYapisi,selectedMevsim:t.mevsim,selectedOther:t.diger,ortMaliyet:t.ortMaliyet,stokAdeti:t.stokAdet,ortFiyat:t.ortFiyat,ortKarOrani:a})}let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.model))].sort(),n=[...new Set(e.map(e=>e.taban))].sort(),s=[...new Set(e.map(e=>e.oran))].sort(),r=[...new Set(e.map(e=>e.jant))].sort(),i=[...new Set(e.map(e=>e.yukEndeksi))].sort(),o=[...new Set(e.map(e=>e.hizEndeksi))].sort(),c=[...new Set(e.map(e=>e.yanakYapisi))].sort(),m=[...new Set(e.map(e=>e.mevsim))].sort(),d=[...new Set(e.map(e=>e.diger))].sort();delete l._id,delete l.owner_id,this.setState(e=>{let l=e.definedBrands,h=e.modelsForTheBrand,u=e.tabansForSelection,p=e.oransForSelection,E=e.jantsForSelection,g=e.yukEndeksForSelection,b=e.hizEndeksForSelection,k=e.yanaksForSelection,y=e.mevsimsForSelection,f=e.otherInfo;return l=t,h=a,u=n,p=s,E=r,g=i,b=o,k=c,y=m,f=d,{definedBrands:l,modelsForTheBrand:h,tabansForSelection:u,oransForSelection:p,jantsForSelection:E,yukEndeksForSelection:g,hizEndeksForSelection:b,yanaksForSelection:k,mevsimsForSelection:y,otherInfo:f}})}).catch(console.error)},this.resetForm=()=>{document.getElementById("satis-birim-fiyat-kdvsiz").value="",document.getElementById("satis-toplam-fiyat-kdvsiz").value="",Fe.collection("purchaseCollection").find().toArray().then(e=>{let t=[...new Set(e.map(e=>e.marka))],a=[...new Set(e.map(e=>e.model))],l=[...new Set(e.map(e=>e.taban))],n=[...new Set(e.map(e=>e.oran))],s=[...new Set(e.map(e=>e.jant))],r=[...new Set(e.map(e=>e.yukEndeksi))],i=[...new Set(e.map(e=>e.hizEndeksi))],o=[...new Set(e.map(e=>e.yanakYapisi))],c=[...new Set(e.map(e=>e.mevsim))],m=[...new Set(e.map(e=>e.diger))];this.setState({definedBrands:t,modelsForTheBrand:a,tabansForSelection:l,oransForSelection:n,jantsForSelection:s,yukEndeksForSelection:r,hizEndeksForSelection:i,yanaksForSelection:o,mevsimsForSelection:c,otherInfo:m,tireSelected:{},queryResulted1:!1,selectedBrand:"",selectedModel:"",selectedTaban:"",selectedOran:"",selectedJant:"",selectedYuk:"",selectedHiz:"",selectedYanak:"",selectedMevsim:"",selectedOther:"",selectedDate:"",birimFiyat:"",satisAdet:"",toplamFiyat:"",wrongInputs:[],saveButtonPressed:!1,ortMaliyet:"",ortFiyat:"",karOrani:"",stokAdeti:0,ortKarOrani:""})})},this.displayOptions=e=>{let t,a;switch(e){case"marka":t=this.state.definedBrands,a="Lastik Markasi Se\xe7in";break;case"model":console.log("model: ",this.state.modelsForTheBrand),t=this.state.modelsForTheBrand,a="Lastik Deseni Se\xe7in";break;case"taban":console.log("taban: ",this.state.tabansForSelection),t=this.state.tabansForSelection,a="Taban Se\xe7in";break;case"oran":console.log("oran: ",this.state.oransForSelection),t=this.state.oransForSelection,a="Oran Se\xe7in";break;case"jant":console.log("jant: ",this.state.jantsForSelection),t=this.state.jantsForSelection,a="Ebati Se\xe7in";break;case"yuk":console.log("yuk"),t=this.state.yukEndeksForSelection,a="Yuk Endeksi Se\xe7in";break;case"hiz":console.log("hiz: ",this.state.hizEndeksForSelection),t=this.state.hizEndeksForSelection,a="Hiz Endeksi Se\xe7in";break;case"yanak":t=this.state.yanaksForSelection,a="Yanak Se\xe7in";break;case"mevsim":t=this.state.mevsimsForSelection,a="Mevsim Se\xe7in";break;case"diger":t=this.state.otherInfo,a="Ek \xd6zellik Se\xe7in"}return 0!=t.length&&!1===String(t[0]).includes("Se\xe7in")&&t.unshift(a),this.state.tireSelected==={}||void 0==t||0==t.length?n.a.createElement("option",null,a):t.map((t,a)=>n.a.createElement("option",{key:e.concat("Options").concat(a)},t))},this.toggleModal=e=>{this.setState({[e]:!this.state[e]})},this.applyFilter=e=>{e.marka?e.marka.includes("Kald\u0131r")?delete e.marka:delete e.tarih:e.tarih.includes("Kald\u0131r")?delete e.tarih:delete e.marka,this.refreshSalesTable(e),this.setState({filterApplied:e})},this.state={tireSelected:{},queryResulted1:!1,definedBrands:[],modelsForTheBrand:[],tabansForSelection:[],oransForSelection:[],jantsForSelection:[],yukEndeksForSelection:[],hizEndeksForSelection:[],yanaksForSelection:[],mevsimsForSelection:[],otherInfo:[],sales:[],selectedBrand:"",selectedModel:"",selectedTaban:"",selectedOran:"",selectedJant:"",selectedYuk:"",selectedHiz:"",selectedYanak:"",selectedMevsim:"",selectedOther:"",selectedDate:"",birimFiyat:"",satisAdet:"",toplamFiyat:"",saveButtonPressed:!1,modalDeleteSale:!1,modalEditSale:!1,filterArrayMarka:[],filterArrayTarih:[],filterApplied:{},ortMaliyet:"",karOrani:"",stokAdeti:0,ortFiyat:"",ortKarOrani:""}}componentWillMount(){Fe.collection("purchaseCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.model))].sort(),l=[...new Set(e.map(e=>e.taban))].sort(),n=[...new Set(e.map(e=>e.oran))].sort(),s=[...new Set(e.map(e=>e.jant))].sort(),r=[...new Set(e.map(e=>e.yukEndeksi))].sort(),i=[...new Set(e.map(e=>e.hizEndeksi))].sort(),o=[...new Set(e.map(e=>e.yanakYapisi))].sort(),c=[...new Set(e.map(e=>e.mevsim))].sort(),m=[...new Set(e.map(e=>e.diger))].sort();this.setState({definedBrands:t,modelsForTheBrand:a,tabansForSelection:l,oransForSelection:n,jantsForSelection:s,yukEndeksForSelection:r,hizEndeksForSelection:i,yanaksForSelection:o,mevsimsForSelection:c,otherInfo:m})}).catch(console.error),Fe.collection("salesCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.tarih))].sort();this.setState({filterArrayMarka:t,filterArrayTarih:a})}).catch(console.error),this.refreshSalesTable(this.state.filterApplied)}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(re,null),n.a.createElement(d.a,{className:"mt--7",fluid:!0},n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"order-xl-1",xl:"12"},n.a.createElement(K.a,{className:"bg-secondary shadow"},n.a.createElement(V.a,{className:"bg-white border-0"},n.a.createElement(N.a,null,n.a.createElement(S.a,{xs:"8"},n.a.createElement("h3",{className:"mb-0"},"Lastik Sat\u0131\u015f Gir")),n.a.createElement(S.a,{className:"text-right",xs:"4"},n.a.createElement(me.a,{color:"danger",type:"button",size:"sm",onClick:this.resetForm},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-eraser"})),n.a.createElement("span",{className:"btn-inner--text"},"S\u0131f\u0131rla"))))),n.a.createElement(U.a,null,n.a.createElement(O.a,null,n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Lastik Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-marka",className:"form-control-label"},"Marka"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("marka")?"form-control-alternative":"is-invalid",id:"satis-marka",value:this.state.selectedBrand,onChange:this.anOptionSelected},this.displayOptions("marka")))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-model",className:"form-control-label"},"Desen"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("model")?"form-control-alternative":"is-invalid",id:"satis-model",value:this.state.selectedModel,onChange:this.anOptionSelected},this.displayOptions("model"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-taban",className:"form-control-label"},"Taban"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("taban")?"form-control-alternative":"is-invalid",id:"satis-taban",value:this.state.selectedTaban,onChange:this.anOptionSelected},this.displayOptions("taban")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-oran",className:"form-control-label"},"Oran"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("oran")?"form-control-alternative":"is-invalid",id:"satis-oran",value:this.state.selectedOran,onChange:this.anOptionSelected},this.displayOptions("oran")))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-jant",className:"form-control-label"},"Jant"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("jant")?"form-control-alternative":"is-invalid",id:"satis-jant",value:this.state.selectedJant,onChange:this.anOptionSelected},this.displayOptions("jant")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-yuk",className:"form-control-label"},"Yuk Endeksi"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("yuk")?"form-control-alternative":"is-invalid",id:"satis-yuk",value:this.state.selectedYuk,onChange:this.anOptionSelected},this.displayOptions("yuk")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-hiz",className:"form-control-label"},"Hiz Endeksi"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("hiz")?"form-control-alternative":"is-invalid",id:"satis-hiz",value:this.state.selectedHiz,onChange:this.anOptionSelected},this.displayOptions("hiz"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-yanak",className:"form-control-label"},"Yanak Yapisi"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("yanak")?"form-control-alternative":"is-invalid",id:"satis-yanak",type:"select",value:this.state.selectedYanak,onChange:this.anOptionSelected},this.displayOptions("yanak")))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-mevsim",className:"form-control-label"},"Mevsim"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("mevsim")?"form-control-alternative":"is-invalid",id:"satis-mevsim",value:this.state.selectedMevsim,onChange:this.anOptionSelected},this.displayOptions("mevsim")))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"satis-diger",className:"form-control-label"},"Diger"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("diger")?"form-control-alternative":"is-invalid",id:"satis-diger",value:this.state.selectedOther,onChange:this.anOptionSelected},this.displayOptions("diger"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-birim-fiyat"},"Birim Fiyat\u0131 (KDV Dahil)"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("birim")?"form-control-alternative":"is-invalid",id:"satis-birim-fiyat",placeholder:"\u20ba Cinsinden",type:"number",value:this.state.birimFiyat,onChange:this.inputBirimChanged}))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-adet"},"Adet"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("adet")?"form-control-alternative":"is-invalid",id:"satis-adet",placeholder:"0",type:"number",min:"0",max:this.state.stokAdeti,value:this.state.satisAdet,onChange:this.adetChanged}))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-toplam-fiyat"},"Toplam Fiyat\u0131 (KDV Dahil)"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("toplam")?"form-control-alternative":"is-invalid",id:"satis-toplam-fiyat",placeholder:"\u20ba Cinsinden",type:"number",value:this.state.toplamFiyat,onChange:this.inputToplamChanged}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-tarih"},"Tarih"),n.a.createElement(Ee,{id:"satis-tarih",className:this.inputSetCorrectlyFor("date")?"is-invalid":"form-control-alternative",placeholder:"Sat\u0131\u015f Tarihi Se\xe7in",value:this.state.selectedDate,onChange:this.inputDateChanged})))),n.a.createElement(N.a,{className:"justify-content-md-center"},n.a.createElement(S.a,{lg:"4",className:"text-right"},n.a.createElement(me.a,{block:!0,className:"btn-icon btn-3",color:"primary",type:"button",size:"lg",onClick:this.saveSale},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-save"})),n.a.createElement("span",{className:"btn-inner--text"},"Sat\u0131\u015f\u0131 Kaydet"))))),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Sat\u0131\u015f Destek Asistan\u0131"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-ort-maliyet"},"Ortalama Maliyet"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-ort-maliyet",placeholder:"\u20ba Cinsinden",type:"text",value:this.state.ortMaliyet}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-kar-orani"},"Mevcut \u0130\u015flem K\xe2r Oran\u0131"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-kar-orani",placeholder:"% -",type:"text",value:this.state.karOrani}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-ort-fiyat"},"Ortalama Fiyat"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-ort-fiyat",placeholder:"\u20ba Cinsinden",type:"text",value:this.state.ortFiyat}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-ort-kar"},"Ortalama K\xe2r Oran\u0131"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-ort-kar",placeholder:"% -",type:"text",value:this.state.ortKarOrani})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-birim-fiyat-kdvsiz"},"Birim Fiyat\u0131 (KDV Hari\xe7)"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-birim-fiyat-kdvsiz",placeholder:"- \u20ba",type:"text"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"satis-toplam-fiyat-kdvsiz"},"Toplam Fiyat\u0131 (KDV Hari\xe7)"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"satis-toplam-fiyat-kdvsiz",placeholder:"- \u20ba",type:"text"})))))))))),n.a.createElement("hr",{className:"my-4"}),n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"order-xl-1",xl:"12"},n.a.createElement(Ne,{mainTitle:"Mevcut Lastik Sat\u0131\u015flar\u0131",columnTitles:["Marka","Desen","Ebat","Tarih","Adet","Birim Fiyat","Di\u011fer"],data:this.state.sales,deleteModalStateName:"modalDeleteSale",editModalStateName:"modalEditSale",toggleFunc:this.toggleModal,confirmFunc:this.deleteSale,editFunc:this.editSale,isConfirmModalVisible:this.state.modalDeleteSale,isEditModalVisible:this.state.modalEditSale,markaFilterOptions:this.state.filterArrayMarka,tarihFilterOptions:this.state.filterArrayTarih,filterFunc:this.applyFilter,filter:this.state.filterApplied})))))}}var Me=xe;class we extends l.Component{constructor(e){super(e),this.toggleModal=()=>{let e=this.state.isOnScreen;this.setState({isOnScreen:!this.state.isOnScreen}),this.props.toggleFunc(this.props.modalStateName,!e)},this.saveUpdates=()=>{this.setState({isOnScreen:!this.state.isOnScreen});let e=new ke(this.state.tire);e._id=this.state.tire._id,e.owner_id=this.state.tire.owner_id,e.marka=document.getElementById("edit-modal-marka").value,e.model=document.getElementById("edit-modal-model").value,e.taban=Number(document.getElementById("edit-modal-taban").value),e.oran=Number(document.getElementById("edit-modal-oran").value),e.jant=document.getElementById("edit-modal-jant").value,e.yukEndeksi=Number(document.getElementById("edit-modal-yuk").value),e.hizEndeksi=document.getElementById("edit-modal-hiz").value,e.yanakYapisi=document.getElementById("edit-modal-yanak").value,e.mevsim=document.getElementById("edit-modal-mevsim").value,e.diger=document.getElementById("edit-modal-diger").value,console.log("+++File to be replaced:",e.idInfoToString(),"=>",e.fullInfo()),this.props.editFunc(e)},this.state={isOnScreen:e.isOpen,title:e.title,tire:e.tire}}componentWillMount(){console.log("componentWillMount: ModalEdit");let e=new ke(this.state.tire);console.log("++Tire in the state: ",this.state.tire),console.log("++Tire newly created: ",e),console.log("---"),console.log(e.mainInfo())}render(){return n.a.createElement(ye.a,{className:"modal-dialog-centered",isOpen:this.state.isOnScreen},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h2",{className:"modal-title",id:"modal-title-default"},this.state.title),n.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},n.a.createElement("span",{"aria-hidden":!0},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement(O.a,null,n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-marka",className:"form-control-label",sm:"2"},"Marka"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"edit-modal-marka",placeholder:this.state.tire.marka,defaultValue:this.state.tire.marka})),n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-model",className:"form-control-label",sm:"2"},"Desen"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"edit-modal-model",placeholder:this.state.tire.model,defaultValue:this.state.tire.model}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-taban",className:"form-control-label"},"Taban"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modal-taban",min:"155",max:"325",step:"10",placeholder:this.state.tire.taban,defaultValue:this.state.tire.taban})),n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-oran",className:"form-control-label"},"Oran"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modal-oran",min:"20",max:"95",step:"5",placeholder:this.state.tire.oran,defaultValue:this.state.tire.oran}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-jant",className:"form-control-label",sm:"3"},"Jant"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"edit-modal-jant",placeholder:this.state.tire.jant,defaultValue:this.state.tire.jant})),n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-yuk",className:"form-control-label",sm:"6"},"Yuk Endeksi"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modal-yuk",min:"70",max:"130",step:"1",placeholder:this.state.tire.yukEndeksi,defaultValue:this.state.tire.yukEndeksi}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-hiz",className:"form-control-label",sm:"3"},"H\u0131z Endeksi"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"edit-modal-hiz",maxLength:"1",placeholder:this.state.tire.hizEndeksi,defaultValue:this.state.tire.hizEndeksi})),n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-yanak",className:"form-control-label"},"Yanak Yap\u0131s\u0131"),n.a.createElement(z.a,{className:"form-control-alternative",id:"edit-modal-yanak",type:"text",placeholder:this.state.tire.yanakYapisi,defaultValue:this.state.tire.yanakYapisi}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-mevsim",className:"form-control-label"},"Mevsim"),n.a.createElement(z.a,{className:"form-control-alternative",id:"edit-modal-mevsim",type:"text",placeholder:this.state.tire.mevsim,defaultValue:this.state.tire.mevsim})),n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modal-diger",className:"form-control-label"},"Di\u011fer"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"edit-modal-diger",placeholder:this.state.tire.diger,defaultValue:this.state.tire.diger}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{className:"text-left"},n.a.createElement(me.a,{className:"ml-auto",color:"danger","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},"Vazge\xe7")),n.a.createElement(S.a,{className:"text-right",sm:"9"},n.a.createElement(me.a,{color:"primary",type:"button",onClick:()=>this.saveUpdates()},"De\u011fi\u015fiklikleri Kaydet"))))))}}a(572);class Te extends l.Component{constructor(e){super(e),this.toggleModal=()=>{let e=this.state.isOnScreen;this.setState({isOnScreen:!this.state.isOnScreen}),this.props.toggleFunc(this.props.modalStateName,!e)},this.confirmPressed=()=>{this.setState({isOnScreen:!this.state.isOnScreen}),this.props.confirmFunc(this.state.tire)},this.state={isOnScreen:e.isOpen,headerTitle:e.headerTitle,mainTitle:e.mainTitle,question:e.question,confirmButtonName:e.confirmButtonName,tire:e.forTire}}componentDidMount(){console.log("Confirmation Modal componentDidMount"),console.log(this.state.tire)}render(){return n.a.createElement(ye.a,{className:"modal-dialog-centered modal-danger",contentClassName:"bg-gradient-danger",isOpen:this.state.isOnScreen,toggle:()=>this.toggleModal(),backdrop:"static"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h6",{className:"modal-title",id:"modal-title-notification"},this.state.headerTitle),n.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},n.a.createElement("span",{"aria-hidden":!0},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",{className:"py-3 text-center"},n.a.createElement("i",{className:"ni ni-bell-55 ni-3x"}),n.a.createElement("h4",{className:"heading mt-4"},this.state.mainTitle),n.a.createElement("p",null,this.state.question))),n.a.createElement("div",{className:"modal-footer"},n.a.createElement(me.a,{className:"btn-white",color:"default",type:"button",onClick:()=>this.confirmPressed()},this.state.confirmButtonName),n.a.createElement(me.a,{className:"text-white ml-auto",color:"link","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},"Vazge\xe7")))}}const Ae=ne.c.getAppClient("lastikpark-ogewz"),Oe=Ae.getServiceClient(ne.b.factory,"mongodb-atlas").db("lastikParkDB");Ae.auth.loginWithCredential(new ne.a).then(e=>{console.log("Logged in as anonymous user with id: ".concat(e.id))}).catch(console.error);class De extends n.a.Component{constructor(e){super(e),this.updateTireInDB=e=>{Oe.collection("inventoryCollection").findOneAndReplace({_id:e._id},e).then(e=>{console.log("Updated document: ",e),this.setState({modalEditTire:!1}),this.refreshInventoryTable()}).catch(console.error)},this.deleteTireFromDB=e=>{let t=e._id;console.log("Tirewith id '",t.toString(),"'will be deleted from database."),console.log(e),Oe.collection("inventoryCollection").findOneAndDelete({_id:e._id}).then(e=>{console.log("Deleted document: ",e),this.setState({modalDeleteTire:!1}),this.refreshInventoryTable()}).catch(console.error)},this.displayError=e=>{console.log("======================================="),console.log(e.message),this.setState({modalError:!0,errorMsg:e.message})},this.toggleEditModal=()=>{this.setState({modalEditTire:!this.state.modalEditTire})},this.setModalInterComp=(e,t)=>{this.setState({[e]:t}),"modalError"===e&&this.setState({errorMsg:""})},this.toggleModal=e=>{this.setState({[e]:!this.state[e]})},this.state={maxStock:100,tires:[],modalDeleteTire:!1,modalEditTire:!1,modalError:!1,errorMsg:""},console.log("*** CONSTRUCTOR ***"),this.insertNewTire=this.insertNewTire.bind(this),this.inputTyped=this.inputTyped.bind(this),this.displayInventory=this.displayInventory.bind(this)}insertNewTire(){let e=document.getElementById("tanim-marka").value,t=document.getElementById("tanim-model").value,a=Number(document.getElementById("tanim-taban").value),l=Number(document.getElementById("tanim-oran").value),n=document.getElementById("tanim-jant").value,s=Number(document.getElementById("tanim-yuk").value),r=document.getElementById("tanim-hiz").value,i=document.getElementById("tanim-yanak").value,o=document.getElementById("tanim-mevsim").value,c=document.getElementById("tanim-diger").value;Oe.collection("inventoryCollection").insertOne({owner_id:Ae.auth.user.id,marka:e,model:t,taban:a,oran:l,jant:n,yukEndeksi:s,hizEndeksi:r,yanakYapisi:i,mevsim:o,diger:c}).then(e=>{console.log("Insert done with id:",e.insertedId),this.refreshInventoryTable()}).catch(this.displayError(console.error))}refreshInventoryTable(){Oe.collection("inventoryCollection").find().toArray().then(e=>{console.log("StockItems:",e),this.setState(t=>(console.log("Burdaki results ne: ",e),{tires:e}))}).catch(console.error),console.log(">>> Table ROWS: ",this.tableRows),console.log("StateTiresArray",this.state.tires)}componentDidMount(){console.log("DidMount Entered:")}componentWillMount(){console.log("*** willMount/ "),this.refreshInventoryTable()}componentWillUpdate(){console.log("***willUpdate ",this.state.tires)}inputTyped(e){switch(e.target.id.substring(6)){case"marka":this.state.marka=e.target.value;break;case"taban":this.state.taban=Number(e.target.value);break;case"oran":this.state.oran=Number(e.target.value);break;case"jant":this.state.jant=e.target.value;break;case"yuk":this.state.yukEndeksi=Number(e.target.value);break;case"hiz":this.state.hizEndeksi=e.target.value;break;case"yanak":this.state.yanakYapisi=e.target.value;break;case"mevsim":this.state.mevsim=e.target.value;break;case"diger":this.state.diger=e.target.value}}displayInventory(){console.log("Entered in display inventory:")}resetForm(){document.getElementById("tanim-marka").value="",document.getElementById("tanim-taban").value="",document.getElementById("tanim-oran").value="",document.getElementById("tanim-jant").value="",document.getElementById("tanim-yuk").value="",document.getElementById("tanim-hiz").value="",document.getElementById("tanim-yanak").value="",document.getElementById("tanim-mevsim").value="",document.getElementById("tanim-diger").value=""}renderStockData(){return this.state.tires.map((e,t)=>{let l=new ke(e);console.log("TireArray to be parsed has lengt of: ",this.state.tires.length);const s=e._id,r=(e.owner_id,e.marka),i=e.model,o=e.taban,c=e.oran,m=e.jant,d=e.yukEndeksi,h=e.hizEndeksi,u=e.yanakYapisi,p=e.mevsim,f=e.diger;console.log("id and oid:",l._id,l.owner_id);const v=String(o).concat(" / ").concat(String(c)).concat(" / ").concat(m).concat(" / ").concat(d).concat(" / ").concat(h),N=(this.state.maxStock,"tooltip".concat(s.toString())),S="r".concat(s.toString()),F="Stok#: ".concat(String(10)).concat("\n\t Yanak: ".concat(u)).concat("\n\t Mevsim: ".concat(p).concat("\n\t Di\u011fer: ".concat(f)));console.log("otherinfi:",F);const C=r.concat(" ").concat(i).concat(" - ").concat(v);return n.a.createElement("tr",{key:S},n.a.createElement("th",{scope:"row"},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("a",{className:"avatar rounded-circle mr-3",href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("img",{alt:"...",src:a(82)})),n.a.createElement(b.a,null,n.a.createElement("span",{className:"mb-0 text-sm"},r)))),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},i)),n.a.createElement("td",null,n.a.createElement("i",{className:"fas fa-car-side text-info"})," ",v),n.a.createElement("td",{className:"text-center"},n.a.createElement("span",null,n.a.createElement("i",{className:"fas fa-info-circle text-info",id:N}),n.a.createElement(_.a,{delay:0,target:N},F))),n.a.createElement("td",{className:"text-right"},n.a.createElement(E.a,{direction:"left"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:"ni ni-settings text-info"})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},n.a.createElement(y.a,{className:"noti-title",header:!0,tag:"div"},n.a.createElement("h6",{className:"text-overflow m-0"},C)),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,{onClick:()=>this.toggleModal("modalEditTire")},n.a.createElement("i",{className:"fas fa-edit"}),n.a.createElement("span",null,"D\xfczenle"),n.a.createElement(we,{title:l.mainInfo(),tire:l,modalStateName:"modalEditTire",isOpen:this.state.modalEditTire,toggleFunc:this.setModalInterComp,editFunc:this.updateTireInDB,forTire:l})),n.a.createElement(y.a,{onClick:()=>this.toggleModal("modalDeleteTire")},n.a.createElement("i",{className:"fas fa-trash-alt"}),n.a.createElement("span",null,"Sil"),n.a.createElement(Te,{headerTitle:"Dikkat!",mainTitle:l.mainInfo(),confirmButtonName:"Onayl\u0131yorum, sil.",question:"Yukarda belirtilen lasti\u011fi envanterden silmek \xfczeresiniz.\nOnayl\u0131yor musunuz?",isOpen:this.state.modalDeleteTire,modalStateName:"modalDeleteTire",toggleFunc:this.setModalInterComp,confirmFunc:this.deleteTireFromDB,forTire:l}))))))})}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(re,null),n.a.createElement(d.a,{className:"mt--7",fluid:!0},n.a.createElement(N.a,null,n.a.createElement("div",{className:"col"},n.a.createElement(K.a,{className:"bg-secondary shadow"},n.a.createElement(V.a,{className:"bg-white border-0"},n.a.createElement("h3",{className:"mb-0"},"Yeni Lastik Tanimi")),n.a.createElement(U.a,null,n.a.createElement(O.a,null,n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Lastik Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-marka",className:"form-control-label"},"Marka"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"tanim-marka",placeholder:"Yeni Lastik Markasini Girin"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-model",className:"form-control-label"},"Desen"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"tanim-model",placeholder:"Yeni Lastik Deseni Girin"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-taban",className:"form-control-label"},"Taban"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"tanim-taban",placeholder:"155<->325",min:"155",max:"325",step:"10"}))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-oran",className:"form-control-label"},"Oran"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"tanim-oran",placeholder:"20<->95",min:"20",max:"95",step:"5"}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-jant",className:"form-control-label"},"Jant"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"tanim-jant",placeholder:"Rxx"}))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-yuk",className:"form-control-label"},"Yuk Endeksi"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"tanim-yuk",placeholder:"70<->130",min:"70",max:"130",step:"1"}))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-hiz",className:"form-control-label"},"Hiz Endeksi"),n.a.createElement(z.a,{type:"text",className:"form-control-alternative",id:"tanim-hiz",maxLength:"1"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-yanak",className:"form-control-label"},"Yanak Yapisi"),n.a.createElement(z.a,{className:"form-control-alternative",id:"tanim-yanak",type:"text",placeholder:"Lastik Yanaklari"}))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-mevsim",className:"form-control-label"},"Mevsim"),n.a.createElement(z.a,{className:"form-control-alternative",id:"tanim-mevsim",placeholder:"Yaz/Kis/4Mevsim..",type:"text"}))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"tanim-diger",className:"form-control-label"},"Diger"),n.a.createElement(z.a,{type:"text",placeholder:"Ek ozellikler...",className:"form-control-alternative",id:"tanim-diger"})))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(me.a,{block:!0,className:"btn-icon btn-3",color:"danger",type:"button",size:"lg",onClick:this.resetForm},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-eraser"})),n.a.createElement("span",{className:"btn-inner--text"},"Formu Temizle"))),n.a.createElement(S.a,{lg:"9"},n.a.createElement(me.a,{block:!0,className:"btn-icon btn-3",color:"primary",type:"button",size:"lg",onClick:this.insertNewTire},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-save"})),n.a.createElement("span",{className:"btn-inner--text"},"Kaydet")))))))))),n.a.createElement(N.a,{className:"mt-5"},n.a.createElement("div",{className:"col"},n.a.createElement(K.a,{className:"bg-default shadow"},n.a.createElement(V.a,{className:"bg-transparent border-0"},n.a.createElement("h3",{className:"text-white mb-0"},"Tan\u0131ml\u0131 Lastikler")),n.a.createElement(H.a,{className:"align-items-center table-dark table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Marka"),n.a.createElement("th",{scope:"col"},"Desen"),n.a.createElement("th",{scope:"col"},"Ebatlar"),n.a.createElement("th",{className:"text-center",scope:"col"},"Di\u011fer"),n.a.createElement("th",{className:"text-right",scope:"col"},"D\xfczenle"))),n.a.createElement("tbody",null,this.renderStockData()))))),n.a.createElement(Te,{headerTitle:"Hata!",mainTitle:this.state.errorMsg,confirmButtonName:"Tamam",question:"Uzgunuz yapmak istediginiz islem Hatali.",isOpen:this.state.modalError,modalStateName:"modalError",toggleFunc:this.setModalInterComp})))}}var ze=De;class Be extends l.Component{constructor(e){super(e),this.toggleModal=()=>{this.setState({isOnScreen:!this.state.isOnScreen}),this.props.toggleFunc(this.props.modalStateName)},this.dateChanged=e=>{console.log("inputDateChangeCalled : ",e),this.setState({editedDate:e})},this.numInputChanged=e=>{console.log("asdasd",e);let t=e.target.id.substring(14),a=Number(e.target.value);a>0&&this.setState({[t]:a})},this.saveUpdates=()=>{this.setState({isOnScreen:!this.state.isOnScreen});let e=this.props.trx.alisAdet,t=this.props.trx.birimMaliyet*this.props.trx.alisAdet;this.props.trx.birimMaliyet=Number(document.getElementById("edit-modalTrx-birimMaliyet").value),this.props.trx.alisAdet=Number(document.getElementById("edit-modalTrx-alisAdet").value),this.props.trx.tarih=this.state.editedDate,console.log("-i- saveUpdates@ModalEditTrxAlis: new trx: ",this.props.trx),this.props.editFunc(this.props.trx,e,t)},this.state={isOnScreen:e.isOpen,editedDate:e.trx.tarih,birimMaliyet:e.trx.birimMaliyet,alisAdet:e.trx.alisAdet}}componentWillMount(){console.log("componentWillMount: @ModaalEditTrxAlis"),console.log("++isOpen ",this.props.isOpen,this.props.trx)}render(){return n.a.createElement(ye.a,{className:"modal-dialog-centered",isOpen:this.state.isOnScreen},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h3",{className:"modal-title",id:"modal-title-default"},this.props.title),n.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},n.a.createElement("span",{"aria-hidden":!0},"\xd7"))),n.a.createElement("div",{className:"modal-body"},n.a.createElement(O.a,null,n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{sm:"6"},n.a.createElement("label",{htmlFor:"edit-modalTrx-birimMaliyet",className:"form-control-label",sm:"2"},"Birim Maliyeti (KDV Dahil)"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modalTrx-birimMaliyet",placeholder:this.props.trx.birimMaliyet,min:"1",onChange:this.numInputChanged,value:this.state.birimMaliyet})),n.a.createElement(S.a,{lg:"6"},n.a.createElement("label",{htmlFor:"edit-modalTrx-alisAdet",className:"form-control-label",sm:"2"},"Adet"),n.a.createElement(z.a,{type:"number",className:"form-control-alternative",id:"edit-modalTrx-alisAdet",min:"1",placeholder:this.props.trx.alisAdet,onChange:this.numInputChanged,value:this.state.alisAdet}))),n.a.createElement(de.a,{row:!0,className:"justify-content-md-center"},n.a.createElement(S.a,{sm:"12"},n.a.createElement("label",{htmlFor:"edit-modalTrx-tarih",className:"form-control-label",sm:"3"},"Tarih"),n.a.createElement(Ee,{id:"edit-modalTrx-tarih",className:"form-control-alternative",placeholder:this.props.trx.tarih,value:this.state.editedDate,onChange:this.dateChanged}))),n.a.createElement(de.a,{row:!0},n.a.createElement(S.a,{className:"text-left"},n.a.createElement(me.a,{className:"ml-auto",color:"danger","data-dismiss":"modal",type:"button",onClick:()=>this.toggleModal()},"Vazge\xe7")),n.a.createElement(S.a,{className:"text-right",sm:"9"},n.a.createElement(me.a,{color:"primary",type:"button",onClick:()=>this.saveUpdates()},"De\u011fi\u015fiklikleri Kaydet"))))))}}class Ie extends l.Component{constructor(e){super(e),this.addMarkaFilter=e=>{console.log("addFilter@AlisDataTable event: ",e.currentTarget.textContent),this.props.filterFunc({marka:e.currentTarget.textContent})},this.addTarihFilter=e=>{console.log("addFilter@AlisDataTable event: ",e.currentTarget.textContent),this.props.filterFunc({tarih:e.currentTarget.textContent})},this.renderColumnTitles=()=>this.state.columnTitles.map((e,t)=>{var a;console.log(t,e,this.props.filter);let l="thColHdr"+t,s="iFilterId"+t;switch(e){case"Marka":return a=this.props.filter.marka?"fas fa-filter text-green":"fas fa-filter",n.a.createElement("th",{scope:"col",key:l},e,n.a.createElement(E.a,{direction:"right"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:a,id:s})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},this.renderMarkaFilterOptions(),this.props.filter.marka&&n.a.createElement(y.a,{divider:!0}),this.props.filter.marka&&n.a.createElement(y.a,{key:"removeFilter",onClick:this.addMarkaFilter},n.a.createElement("span",null,"Filtreyi Kald\u0131r")))));case"Tarih":return a=this.props.filter.tarih?"fas fa-filter text-green":"fas fa-filter",n.a.createElement("th",{scope:"col",key:l},e,n.a.createElement(E.a,{direction:"right"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:a,id:s})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},this.renderTarihFilterOptions(),this.props.filter.tarih&&n.a.createElement(y.a,{divider:!0}),this.props.filter.tarih&&n.a.createElement(y.a,{key:"removeFilter-tarih",onClick:this.addTarihFilter},n.a.createElement("span",null,"Filtreyi Kald\u0131r")))));default:return n.a.createElement("th",{scope:"col",key:l},e)}}),this.state={columnTitles:e.columnTitles}}componentDidMount(){console.log("DataTable componentDidMount"),console.log("Column headers: ",this.props.isEditModalVisible)}renderMarkaFilterOptions(){return this.props.markaFilterOptions.map(e=>n.a.createElement(y.a,{key:e,onClick:this.addMarkaFilter},n.a.createElement("span",null,e)))}renderTarihFilterOptions(){return this.props.tarihFilterOptions.map(e=>n.a.createElement(y.a,{key:e,onClick:this.addTarihFilter},n.a.createElement("span",null,e)))}renderRows(){return this.props.data.map((e,t)=>{let l=new ke(e),s=e;const r=e._id,i=(e.owner_id,e.marka),o=e.model,c=e.taban,m=e.oran,d=e.jant,h=e.yukEndeksi,u=e.hizEndeksi,p=e.yanakYapisi,f=e.mevsim,v=e.diger,N=e.tarih,S=e.alisAdet,F=e.birimMaliyet,C=r,x=String(c).concat(" / ").concat(String(m)).concat(" / ").concat(d).concat(" / ").concat(h).concat(" / ").concat(u),M="tooltip".concat(r.toString()),w="r".concat(r.toString()),T="Yanak: ".concat(p).concat("\n\t\t  Mevsim: ".concat(f).concat("\n\t Di\u011fer: ".concat(v)));console.log("otherinfi:",T);const A=l.mainInfo()+" i\xe7in, \n"+N+" tarihinde\n"+F+"\u20ba fiyat\u0131ndan\n"+S+" adet sat\u0131n al\u0131m i\u015flemi",O=i.concat(" ").concat(o).concat(" - ").concat(x);return n.a.createElement("tr",{key:w},n.a.createElement("th",{scope:"row"},n.a.createElement(b.a,{className:"align-items-center"},n.a.createElement("a",{className:"avatar rounded-circle mr-3",href:"#pablo",onClick:e=>e.preventDefault()},n.a.createElement("img",{alt:"...",src:a(82)})),n.a.createElement(b.a,null,n.a.createElement("span",{className:"mb-0 text-sm"},i)))),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},o)),n.a.createElement("td",null,n.a.createElement("i",{className:"fas fa-car-side text-info"})," ",x),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},N)),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},S)),n.a.createElement("td",null,n.a.createElement("span",{className:"mb-0 text-sm"},F)),n.a.createElement("td",{className:"text-right"},n.a.createElement("span",null,n.a.createElement("i",{className:"fas fa-info-circle text-info",id:M}),n.a.createElement(_.a,{delay:0,target:M},T)),n.a.createElement(E.a,{direction:"left"},n.a.createElement(g.a,{className:"pr-0",nav:!0},n.a.createElement("i",{className:"ni ni-settings text-info"})),n.a.createElement(k.a,{className:"dropdown-menu-arrow"},n.a.createElement(y.a,{className:"noti-title",header:!0,tag:"div"},n.a.createElement("h6",{className:"text-overflow m-0"},O)),n.a.createElement(y.a,{divider:!0}),n.a.createElement(y.a,{onClick:()=>this.props.toggleFunc("modalEditPurchase")},n.a.createElement("i",{className:"fas fa-edit"}),n.a.createElement("span",null,"D\xfczenle"),n.a.createElement(Be,{title:l.mainInfo(),tire:l,modalStateName:this.props.editModalStateName,isOpen:this.props.isEditModalVisible,toggleFunc:this.props.toggleFunc,editFunc:this.props.editFunc,trx:s})),n.a.createElement(y.a,{onClick:()=>this.props.toggleFunc("modalDeletePurchase")},n.a.createElement("i",{className:"fas fa-trash-alt"}),n.a.createElement("span",null,"Sil"),n.a.createElement(fe,{headerTitle:"Dikkat!",mainTitle:A,confirmButtonName:"Onayl\u0131yorum, sil.",question:"Yukarda belirtilen al\u0131m i\u015flemini envanterden silmek \xfczeresiniz.\nOnayl\u0131yor musunuz?",isOpen:this.props.isConfirmModalVisible,modalStateName:this.props.deleteModalStateName,toggleFunc:this.props.toggleFunc,confirmFunc:this.props.confirmFunc,id:C}))))))})}render(){return n.a.createElement(K.a,{className:"bg-default shadow"},n.a.createElement(V.a,{className:"bg-transparent border-0"},n.a.createElement("h3",{className:"text-white mb-0"},this.props.mainTitle)),n.a.createElement(H.a,{className:"align-items-center table-dark table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,this.renderColumnTitles())),n.a.createElement("tbody",null,this.renderRows())))}}const Ye=ne.c.getAppClient("lastikpark-ogewz"),je=Ye.getServiceClient(ne.b.factory,"mongodb-atlas").db("lastikParkDB");Ye.auth.loginWithCredential(new ne.a).then(e=>{console.log("Logged in as anonymous user with id: ".concat(e.id))}).catch(console.error);var Re=new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2});class Pe extends n.a.Component{constructor(e){super(e),this.levelforOption=e=>{switch(e){case"marka":return 1;case"model":return 2;case"taban":return 3;case"oran":return 4;case"jant":return 5;case"yuk":return 6;case"hiz":return 7;case"yanak":return 8;case"mevsim":return 9;case"diger":return 10;default:return 0}},this.findLevelAfterDeselect=(e,t)=>{console.log(Object.keys(e));let a=0;return Object.keys(e).map((e,l)=>{console.log(l,e),a<this.levelforOption(e)&&this.levelforOption(e)<this.levelforOption(t)&&(a=this.levelforOption(e))}),a},this.adetChanged=e=>{let t=this.state.birimMaliyet,a=t*e.target.value,l=t/1.18,n=a/1.18;document.getElementById("alis-birim-maliyet-kdvsiz").value=Number.isNaN(l)?"":Re.format(l),document.getElementById("alis-toplam-maliyet-kdvsiz").value=Number.isNaN(n)?"":Re.format(n),this.setState({alisAdet:e.target.value,toplamMaliyet:a})},this.inputBirimChanged=e=>{let t,a=e.target.value;this.setState(e=>{t=e.toplamMaliyet,t=""===a?"":e.alisAdet>0?a*e.alisAdet:"";let l=a/1.18,n=t/1.18;return document.getElementById("alis-birim-maliyet-kdvsiz").value=Number.isNaN(l)?"":Re.format(l),document.getElementById("alis-toplam-maliyet-kdvsiz").value=Number.isNaN(n)?"":Re.format(n),{birimMaliyet:a,toplamMaliyet:t}})},this.inputToplamChanged=e=>{let t,a=e.target.value;this.setState(e=>{t=e.birimMaliyet,t=""===a?"":e.alisAdet>0?a/e.alisAdet:"";let l=Re.format(t/1.18),n=Re.format(a/1.18);return document.getElementById("alis-birim-maliyet-kdvsiz").value=Number.isNaN(l)?"":l,document.getElementById("alis-toplam-maliyet-kdvsiz").value=Number.isNaN(n)?"":n,{birimMaliyet:t,toplamMaliyet:a}})},this.inputDateChanged=e=>{console.log("inputDateChangeCalled : ",e),this.setState({selectedDate:e})},this.inputDateChanged2=(e,t)=>{console.log("value2, formattedVal2: ",e,t),this.setState({selectedDate2:e,formattedDate2:t})},this.inputSetCorrectlyFor=e=>{let t=!0;if(this.state.saveButtonPressed)switch(e){case"marka":t=""!==this.state.selectedBrand;break;case"model":t=""!==this.state.selectedModel;break;case"taban":t=""!==this.state.selectedTaban;break;case"oran":t=""!==this.state.selectedOran;break;case"jant":t=""!==this.state.selectedJant;break;case"yuk":t=""!==this.state.selectedYuk;break;case"hiz":t=""!==this.state.selectedHiz;break;case"yanak":t=""!==this.state.selectedYanak;break;case"mevsim":t=""!==this.state.selectedMevsim;break;case"diger":t=""!==this.state.selectedOther;break;case"birim":t=""!==this.state.birimMaliyet&&0!=this.state.birimMaliyet;break;case"adet":t=""!==this.state.alisAdet&&0!=this.state.alisAdet;break;case"toplam":t=""!==this.state.toplamMaliyet&&0!=this.state.toplamMaliyet}return t},this.allInputsSetCorrectly=()=>{let e=!0,t=[];return""===this.state.selectedBrand&&(t.push("Marka"),e=!1),""===this.state.selectedModel&&(t.push("Desen"),e=!1),""===this.state.selectedTaban&&(t.push("Taban"),e=!1),""===this.state.selectedOran&&(t.push("Oran"),e=!1),""===this.state.selectedJant&&(t.push("Jant"),e=!1),""===this.state.selectedYuk&&(t.push("Yuk Endeksi"),e=!1),""===this.state.selectedHiz&&(t.push("H\u0131z Endeksi"),e=!1),""===this.state.selectedYanak&&(t.push("Yanak"),e=!1),""===this.state.selectedMevsim&&(t.push("Mevsim"),e=!1),""===this.state.selectedOther&&(t.push("Di\u011fer"),e=!1),""!==this.state.birimMaliyet&&0!=this.state.birimMaliyet||(t.push("Birim-maliyet"),e=!1),""!==this.state.alisAdet&&0!=this.state.alisAdet||(t.push("Adet"),e=!1),""!==this.state.toplamMaliyet&&0!=this.state.toplamMaliyet||(t.push("Toplam-maliyet"),e=!1),this.setState({saveButtonPressed:!0,wrongInputs:t}),e},this.savePurchase=()=>{if(this.allInputsSetCorrectly()){let e,t=this.state.selectedBrand,a=this.state.selectedModel,l=Number(this.state.selectedTaban),n=Number(this.state.selectedOran),s=this.state.selectedJant,r=Number(this.state.selectedYuk),i=this.state.selectedHiz,o=this.state.selectedYanak,c=this.state.selectedMevsim,m=this.state.selectedOther,d=Number(this.state.birimMaliyet),h=Number(this.state.alisAdet);if(""===this.state.selectedDate){let t=new Date;e=String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear(),alert("tarih",e)}else e=this.state.selectedDate;je.collection("purchaseCollection").insertOne({owner_id:Ye.auth.user.id,marka:t,model:a,taban:l,oran:n,jant:s,yukEndeksi:r,hizEndeksi:i,yanakYapisi:o,mevsim:c,diger:m,tarih:e,alisAdet:h,birimMaliyet:d}).then(e=>{console.log("Insert done with id:",e.insertedId),this.setState({saveButtonPressed:!1}),this.refreshPurchaseTable(this.state.filterApplied)}).catch(alert(console.error));let u={owner_id:Ye.auth.user.id,marka:t,model:a,taban:l,oran:n,jant:s,yukEndeksi:r,hizEndeksi:i,yanakYapisi:o,mevsim:c,diger:m};this.updateStockWithPurchase(u,d,h)}else alert("Eksik bilgi giri\u015fi yapt\u0131n\u0131z. L\xfctfen giri\u015f yapmad\u0131\u011f\u0131n\u0131z k\u0131rm\u0131z\u0131 ile i\u015faretlenmi\u015f alanlar\u0131 doldurun.")},this.updateStockWithPurchase=(e,t,a)=>{je.collection("stockCollection").find(e).toArray().then(l=>{if(l.length>0){console.log("Stok:Tire found: ",l);let n=l[0],s=(n.ortMaliyet*n.alisAdet+t*a)/(n.alisAdet+a);n.ortMaliyet=s,n.alisAdet=n.alisAdet+a,n.stokAdet=n.stokAdet+a,je.collection("stockCollection").findOneAndReplace(e,n).then(e=>{console.log("Updated document: ",e),alert("stock table: Updated!!")}).catch(console.error)}else console.log("Stok Lastik bulunamadi:"),e.alisAdet=a,e.ortMaliyet=t,e.satisAdet=0,e.ortFiyat=0,e.stokAdet=a,je.collection("stockCollection").insertOne(e).then(e=>{console.log("Insert done with id:",e.insertedId)}).catch(console.error)}).catch(console.error)},this.editPurchase=(e,t,a)=>{je.collection("purchaseCollection").findOneAndReplace({_id:e._id},e).then(l=>{console.log("Updated document after editingPurchase: ",l);let n={marka:l.marka,model:l.model,taban:l.taban,oran:l.oran,jant:l.jant,yukEndeksi:l.yukEndeksi,hizEndeksi:l.hizEndeksi,yanakYapisi:l.yanakYapisi,mevsim:l.mevsim,diger:l.diger};je.collection("stockCollection").findOne(n).then(l=>{console.log("deletePurchase Method/ DocumentT2beUpdated: ",l),l.alisAdet-t+e.alisAdet!==0?l.ortMaliyet=(l.ortMaliyet*l.alisAdet-a+e.birimMaliyet*e.alisAdet)/(l.alisAdet-t+e.alisAdet):l.ortMaliyet=0,l.alisAdet=l.alisAdet-t+e.alisAdet,l.stokAdet=l.stokAdet-t+e.alisAdet,je.collection("stockCollection").findOneAndReplace(n,l).then(e=>{console.log("Updated document afterPurchase change: ",e),alert("stock table: Updated after Purchase Change!!")}).catch(console.error)}).catch(console.error),this.setState({modalEditPurchase:!1}),this.refreshPurchaseTable(this.state.filterApplied)}).catch(console.error)},this.deletePurchase=e=>{console.log("Tirewith id '",e.toString(),"'will be deleted from database."),je.collection("purchaseCollection").findOneAndDelete({_id:e}).then(e=>{console.log("Deleted document: ",e);let t={marka:e.marka,model:e.model,taban:e.taban,oran:e.oran,jant:e.jant,yukEndeksi:e.yukEndeksi,hizEndeksi:e.hizEndeksi,yanakYapisi:e.yanakYapisi,mevsim:e.mevsim,diger:e.diger},a=e.birimMaliyet,l=e.alisAdet;je.collection("stockCollection").findOne(t).then(e=>{console.log("deletePurchase Method/ DocumentT2beUpdated: ",e),e.alisAdet-l!==0?e.ortMaliyet=(e.ortMaliyet*e.alisAdet-a*l)/(e.alisAdet-l):e.ortMaliyet=0,e.alisAdet=e.alisAdet-l,e.stokAdet=e.stokAdet-l,je.collection("stockCollection").findOneAndReplace(t,e).then(e=>{console.log("Updated document afterPurchase Deletion: ",e),alert("stock table: Updated after Purchase Deletion!!")}).catch(console.error)}).catch(console.error),this.setState({modalDeletePurchase:!1}),this.refreshPurchaseTable(this.state.filterApplied)}).catch(console.error)},this.refreshPurchaseTable=e=>{je.collection("purchaseCollection").find(e).toArray().then(e=>{console.log("Purchases:",e),this.setState({purchases:e})}).catch(console.error),console.log("purchasesArray",this.state.purchases),je.collection("purchaseCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.tarih))].sort();this.setState({filterArrayMarka:t,filterArrayTarih:a})}).catch(console.error)},this.anOptionSelected=e=>{console.log("option selected: "+e.target.value+" of "+e.target.id);let t=String(e.target.id).substring(5),a=e.target.value;console.log("Tire Selected: "),console.log(this.state.tireSelected),this.setState(e=>{let l=e.queryResulted1,n=e.selectedBrand,s=e.selectedModel,r=e.selectedTaban,i=e.selectedOran,o=e.selectedJant,c=e.selectedYuk,m=e.selectedHiz,d=e.selectedYanak,h=e.selectedMevsim,u=e.selectedOther;switch(e.queryResulted1&&(l=!1,n="",s="",r="",i="",o="",c="",m="",d="",h="",u=""),t){case"marka":n=a;break;case"model":s=a;break;case"taban":r=a;break;case"oran":i=a;break;case"jant":o=a;break;case"yuk":c=a;break;case"hiz":m=a;break;case"yanak":d=a;break;case"mevsim":h=a;break;case"diger":u=a}return{selectedBrand:n,selectedModel:s,selectedTaban:r,selectedOran:i,selectedJant:o,selectedYuk:c,selectedHiz:m,selectedYanak:d,selectedMevsim:h,selectedOther:u,queryResulted1:l}});let l=this.state.tireSelected;console.log("===> OptionSelected Before: ",l),a.includes("Se\xe7in")?delete l[t]:l[t]="taban"===t||"oran"===t||"yuk"===t?Number(a):a,console.log("Filter options after new attribute has been added: ",l),je.collection("inventoryCollection").find(l).toArray().then(e=>{if(console.log("DB Results:",e),1==e.length){let t=e[0];console.log("-markaSelected tek kayit ife girdi",t.model,t.taban,t.oran,t.jant),this.setState({tireSelected:{},queryResulted1:!0,selectedBrand:t.marka,selectedModel:t.model,selectedTaban:t.taban,selectedOran:t.oran,selectedJant:t.jant,selectedYuk:t.yukEndeksi,selectedHiz:t.hizEndeksi,selectedYanak:t.yanakYapisi,selectedMevsim:t.mevsim,selectedOther:t.diger})}let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.model))].sort(),n=[...new Set(e.map(e=>e.taban))].sort(),s=[...new Set(e.map(e=>e.oran))].sort(),r=[...new Set(e.map(e=>e.jant))].sort(),i=[...new Set(e.map(e=>e.yukEndeksi))].sort(),o=[...new Set(e.map(e=>e.hizEndeksi))].sort(),c=[...new Set(e.map(e=>e.yanakYapisi))].sort(),m=[...new Set(e.map(e=>e.mevsim))].sort(),d=[...new Set(e.map(e=>e.diger))].sort();delete l._id,delete l.owner_id,this.setState(e=>{let l=e.definedBrands,h=e.modelsForTheBrand,u=e.tabansForSelection,p=e.oransForSelection,E=e.jantsForSelection,g=e.yukEndeksForSelection,b=e.hizEndeksForSelection,k=e.yanaksForSelection,y=e.mevsimsForSelection,f=e.otherInfo;return l=t,h=a,u=n,p=s,E=r,g=i,b=o,k=c,y=m,f=d,{definedBrands:l,modelsForTheBrand:h,tabansForSelection:u,oransForSelection:p,jantsForSelection:E,yukEndeksForSelection:g,hizEndeksForSelection:b,yanaksForSelection:k,mevsimsForSelection:y,otherInfo:f}})}).catch(console.error)},this.modelSelected=e=>{let t=e.target.value,a={marka:this.state.tireSelected.marka,model:t};je.collection("inventoryCollection").find(a).toArray().then(e=>{let a=[...new Set(e.map(e=>e.taban))];console.log("modelSelected global unique Results: ",a),a.length>1&&a.unshift("Taban Se\xe7in"),this.setState({tabansForSelection:a,tireSelected:{marka:this.state.tireSelected.marka,model:t}})}).catch(console.error)},this.resetForm=()=>{document.getElementById("alis-birim-maliyet-kdvsiz").value="",document.getElementById("alis-toplam-maliyet-kdvsiz").value="",je.collection("inventoryCollection").find().toArray().then(e=>{let t=[...new Set(e.map(e=>e.marka))],a=[...new Set(e.map(e=>e.model))],l=[...new Set(e.map(e=>e.taban))],n=[...new Set(e.map(e=>e.oran))],s=[...new Set(e.map(e=>e.jant))],r=[...new Set(e.map(e=>e.yukEndeksi))],i=[...new Set(e.map(e=>e.hizEndeksi))],o=[...new Set(e.map(e=>e.yanakYapisi))],c=[...new Set(e.map(e=>e.mevsim))],m=[...new Set(e.map(e=>e.diger))];this.setState({definedBrands:t,modelsForTheBrand:a,tabansForSelection:l,oransForSelection:n,jantsForSelection:s,yukEndeksForSelection:r,hizEndeksForSelection:i,yanaksForSelection:o,mevsimsForSelection:c,otherInfo:m,tireSelected:{},queryResulted1:!1,selectedBrand:"",selectedModel:"",selectedTaban:"",selectedOran:"",selectedJant:"",selectedYuk:"",selectedHiz:"",selectedYanak:"",selectedMevsim:"",selectedOther:"",selectedDate:"",birimMaliyet:"",alisAdet:"",toplamMaliyet:"",wrongInputs:[],saveButtonPressed:!1})})},this.displayOptions=e=>{let t,a;switch(console.log("DISPLAY OPTIONS INPUT : ",e),e){case"marka":t=this.state.definedBrands,a="Lastik Markasi Se\xe7in";break;case"model":console.log("model: ",this.state.modelsForTheBrand),t=this.state.modelsForTheBrand,a="Lastik Deseni Se\xe7in";break;case"taban":console.log("taban: ",this.state.tabansForSelection),t=this.state.tabansForSelection,a="Taban Se\xe7in";break;case"oran":console.log("oran: ",this.state.oransForSelection),t=this.state.oransForSelection,a="Oran Se\xe7in";break;case"jant":console.log("jant: ",this.state.jantsForSelection),t=this.state.jantsForSelection,a="Ebati Se\xe7in";break;case"yuk":console.log("yuk"),t=this.state.yukEndeksForSelection,a="Yuk Endeksi Se\xe7in";break;case"hiz":console.log("hiz: ",this.state.hizEndeksForSelection),t=this.state.hizEndeksForSelection,a="Hiz Endeksi Se\xe7in";break;case"yanak":t=this.state.yanaksForSelection,a="Yanak Se\xe7in";break;case"mevsim":t=this.state.mevsimsForSelection,a="Mevsim Se\xe7in";break;case"diger":t=this.state.otherInfo,a="Ek \xd6zellik Se\xe7in"}return console.log("-----------\x3e TireSelected before :",this.state.tireSelected),0!=t.length&&!1===String(t[0]).includes("Se\xe7in")&&t.unshift(a),this.state.tireSelected==={}||void 0==t||0==t.length?(console.log("+++ife giriyor"),n.a.createElement("option",null,a)):(console.log("Currently in :",e),console.log("SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS: ",this.state.tireSelected[e]),console.log("tire: ",this.state.tireSelected),t.map((t,a)=>n.a.createElement("option",{key:e.concat("Options").concat(a)},t)))},this.toggleModal=e=>{this.setState({[e]:!this.state[e]})},this.applyFilter=e=>{e.marka?e.marka.includes("Kald\u0131r")?delete e.marka:delete e.tarih:e.tarih.includes("Kald\u0131r")?delete e.tarih:delete e.marka,this.refreshPurchaseTable(e),this.setState({filterApplied:e})},this.state={tireSelected:{},queryResulted1:!1,definedBrands:[],modelsForTheBrand:[],tabansForSelection:[],oransForSelection:[],jantsForSelection:[],yukEndeksForSelection:[],hizEndeksForSelection:[],yanaksForSelection:[],mevsimsForSelection:[],otherInfo:[],purchases:[],selectedBrand:"",selectedModel:"",selectedTaban:"",selectedOran:"",selectedJant:"",selectedYuk:"",selectedHiz:"",selectedYanak:"",selectedMevsim:"",selectedOther:"",selectedDate:"",birimMaliyet:"",alisAdet:"",toplamMaliyet:"",wrongInputs:[],saveButtonPressed:!1,modalDeletePurchase:!1,modalEditPurchase:!1,filterArrayMarka:[],filterArrayTarih:[],filterApplied:{}}}componentWillMount(){je.collection("inventoryCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.model))].sort(),l=[...new Set(e.map(e=>e.taban))].sort(),n=[...new Set(e.map(e=>e.oran))].sort(),s=[...new Set(e.map(e=>e.jant))].sort(),r=[...new Set(e.map(e=>e.yukEndeksi))].sort(),i=[...new Set(e.map(e=>e.hizEndeksi))].sort(),o=[...new Set(e.map(e=>e.yanakYapisi))].sort(),c=[...new Set(e.map(e=>e.mevsim))].sort(),m=[...new Set(e.map(e=>e.diger))].sort();this.setState({definedBrands:t,modelsForTheBrand:a,tabansForSelection:l,oransForSelection:n,jantsForSelection:s,yukEndeksForSelection:r,hizEndeksForSelection:i,yanaksForSelection:o,mevsimsForSelection:c,otherInfo:m})}).catch(console.error),je.collection("purchaseCollection").find().toArray().then(e=>{console.log("will DB Results:",e);let t=[...new Set(e.map(e=>e.marka))].sort(),a=[...new Set(e.map(e=>e.tarih))].sort();this.setState({filterArrayMarka:t,filterArrayTarih:a})}).catch(console.error),this.refreshPurchaseTable(this.state.filterApplied)}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(re,null),n.a.createElement(d.a,{className:"mt--7",fluid:!0},n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"order-xl-1",xl:"12"},n.a.createElement(K.a,{className:"bg-secondary shadow"},n.a.createElement(V.a,{className:"bg-white border-0"},n.a.createElement(N.a,null,n.a.createElement(S.a,{xs:"8"},n.a.createElement("h3",{className:"mb-0"},"Lastik Alim Gir")),n.a.createElement(S.a,{className:"text-right",xs:"4"},n.a.createElement(me.a,{color:"danger",type:"button",size:"sm",onClick:this.resetForm},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-eraser"})),n.a.createElement("span",{className:"btn-inner--text"},"S\u0131f\u0131rla"))))),n.a.createElement(U.a,null,n.a.createElement(O.a,null,n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Lastik Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-marka",className:"form-control-label"},"Marka"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("marka")?"form-control-alternative":"is-invalid",id:"alis-marka",value:this.state.selectedBrand,onChange:this.anOptionSelected},this.displayOptions("marka")))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-model",className:"form-control-label"},"Desen"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("model")?"form-control-alternative":"is-invalid",id:"alis-model",value:this.state.selectedModel,onChange:this.anOptionSelected},this.displayOptions("model"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-taban",className:"form-control-label"},"Taban"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("taban")?"form-control-alternative":"is-invalid",id:"alis-taban",value:this.state.selectedTaban,onChange:this.anOptionSelected},this.displayOptions("taban")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-oran",className:"form-control-label"},"Oran"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("oran")?"form-control-alternative":"is-invalid",id:"alis-oran",value:this.state.selectedOran,onChange:this.anOptionSelected},this.displayOptions("oran")))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-jant",className:"form-control-label"},"Jant"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("jant")?"form-control-alternative":"is-invalid",id:"alis-jant",value:this.state.selectedJant,onChange:this.anOptionSelected},this.displayOptions("jant")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-yuk",className:"form-control-label"},"Yuk Endeksi"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("yuk")?"form-control-alternative":"is-invalid",id:"alis-yuk",value:this.state.selectedYuk,onChange:this.anOptionSelected},this.displayOptions("yuk")))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-hiz",className:"form-control-label"},"Hiz Endeksi"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("hiz")?"form-control-alternative":"is-invalid",id:"alis-hiz",value:this.state.selectedHiz,onChange:this.anOptionSelected},this.displayOptions("hiz"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-yanak",className:"form-control-label"},"Yanak Yapisi"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("yanak")?"form-control-alternative":"is-invalid",id:"alis-yanak",type:"select",value:this.state.selectedYanak,onChange:this.anOptionSelected},this.displayOptions("yanak")))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-mevsim",className:"form-control-label"},"Mevsim"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("mevsim")?"form-control-alternative":"is-invalid",id:"alis-mevsim",value:this.state.selectedMevsim,onChange:this.anOptionSelected},this.displayOptions("mevsim")))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{htmlFor:"alis-diger",className:"form-control-label"},"Diger"),n.a.createElement(z.a,{type:"select",className:this.inputSetCorrectlyFor("diger")?"form-control-alternative":"is-invalid",id:"alis-diger",value:this.state.selectedOther,onChange:this.anOptionSelected},this.displayOptions("diger"))))),n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-birim-maliyet"},"Birim Maliyeti (KDV Dahil)"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("birim")?"form-control-alternative":"is-invalid",id:"alis-birim-maliyet",placeholder:"\u20ba Cinsinden",type:"number",value:this.state.birimMaliyet,onChange:this.inputBirimChanged}))),n.a.createElement(S.a,{lg:"2"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-adet"},"Adet"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("adet")?"form-control-alternative":"is-invalid",id:"alis-adet",placeholder:"0",type:"number",min:"1",value:this.state.alisAdet,onChange:this.adetChanged}))),n.a.createElement(S.a,{lg:"4"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-toplam-maliyet"},"Toplam Maliyet (KDV Dahil)"),n.a.createElement(z.a,{className:this.inputSetCorrectlyFor("toplam")?"form-control-alternative":"is-invalid",id:"alis-toplam-maliyet",placeholder:"\u20ba Cinsinden",type:"number",value:this.state.toplamMaliyet,onChange:this.inputToplamChanged}))),n.a.createElement(S.a,{lg:"3"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-tarih"},"Tarih"),n.a.createElement(Ee,{id:"alis-tarih",className:this.inputSetCorrectlyFor("date")?"is-invalid":"form-control-alternative",placeholder:"Al\u0131m Tarihini Se\xe7in",value:this.state.selectedDate,onChange:this.inputDateChanged})))),n.a.createElement(N.a,{className:"justify-content-md-center"},n.a.createElement(S.a,{lg:"4",className:"text-right"},n.a.createElement(me.a,{block:!0,className:"btn-icon btn-3",color:"primary",type:"button",size:"lg",onClick:this.savePurchase},n.a.createElement("span",{className:"btn-inner--icon"},n.a.createElement("i",{className:"fas fa-save"})),n.a.createElement("span",{className:"btn-inner--text"},"Al\u0131m Gir"))))),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Fatura Hesaplama Bilgileri"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(N.a,null,n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-birim-maliyet-kdvsiz"},"Birim Maliyet (KDV Haric)"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"alis-birim-maliyet-kdvsiz",placeholder:"- \u20ba",type:"text"}))),n.a.createElement(S.a,{lg:"6"},n.a.createElement(de.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"alis-toplam-maliyet-kdvsiz"},"Toplam Maliyet (KDV Haric)"),n.a.createElement(z.a,{disabled:!0,className:"form-control-alternative",id:"alis-toplam-maliyet-kdvsiz",placeholder:"- \u20ba",type:"text"})))))))))),n.a.createElement("hr",{className:"my-4"}),n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"order-xl-1",xl:"12"},n.a.createElement(Ie,{mainTitle:"Mevcut Lastik Al\u0131mlar\u0131",columnTitles:["Marka","Desen","Ebat","Tarih","Adet","Birim Fiyat","Di\u011fer"],data:this.state.purchases,deleteModalStateName:"modalDeletePurchase",editModalStateName:"modalEditPurchase",toggleFunc:this.toggleModal,confirmFunc:this.deletePurchase,editFunc:this.editPurchase,isConfirmModalVisible:this.state.modalDeletePurchase,isEditModalVisible:this.state.modalEditPurchase,markaFilterOptions:this.state.filterArrayMarka,tarihFilterOptions:this.state.filterArrayTarih,filterFunc:this.applyFilter,filter:this.state.filterApplied})))))}}var Le=[{path:"/index",name:"Stok Kontrol",icon:"ni ni-tv-2 text-primary",component:ce,layout:"/admin"},{path:"/alis",name:"Al\u0131\u015f",icon:"ni ni-delivery-fast text-blue",component:Pe,layout:"/admin"},{path:"/satis",name:"Sat\u0131\u015f",icon:"ni ni-money-coins text-orange",component:Me,layout:"/admin"},{path:"/user-profile",name:"Sipari\u015f",icon:"ni ni-cart text-yellow",component:be,layout:"/admin"},{path:"/tanim",name:"Lastikler",icon:"ni ni-bullet-list-67 text-red",component:ze,layout:"/admin"}];class _e extends n.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,t)=>"/admin"===e.layout?n.a.createElement(c.a,{path:e.layout+e.path,component:e.component,key:t}):null),this.getBrandText=e=>{for(let t=0;t<Le.length;t++)if(-1!==this.props.location.pathname.indexOf(Le[t].layout+Le[t].path))return Le[t].name;return"Brand"}}componentDidUpdate(e){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainContent.scrollTop=0}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(j,Object.assign({},this.props,{routes:Le,logo:{innerLink:"/admin/index",imgSrc:a(235),imgAlt:"..."}})),n.a.createElement("div",{className:"main-content",ref:"mainContent"},n.a.createElement(v,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname)})),n.a.createElement(o.a,null,this.getRoutes(Le)),n.a.createElement(d.a,{fluid:!0},n.a.createElement(M,null))))}}var Ke=_e,Ve=a(598);class Ue extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{className:"navbar-top navbar-horizontal navbar-dark",expand:"md"},n.a.createElement(d.a,{className:"px-4"},n.a.createElement(T.a,{to:"/",tag:h.a},n.a.createElement("img",{alt:"...",src:a(573)})),n.a.createElement("button",{className:"navbar-toggler",id:"navbar-collapse-main"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement(Ve.a,{navbar:!0,toggler:"#navbar-collapse-main"},n.a.createElement("div",{className:"navbar-collapse-header d-md-none"},n.a.createElement(N.a,null,n.a.createElement(S.a,{className:"collapse-brand",xs:"6"},n.a.createElement(h.a,{to:"/"},n.a.createElement("img",{alt:"...",src:a(235)}))),n.a.createElement(S.a,{className:"collapse-close",xs:"6"},n.a.createElement("button",{className:"navbar-toggler",id:"navbar-collapse-main"},n.a.createElement("span",null),n.a.createElement("span",null))))),n.a.createElement(p.a,{className:"ml-auto",navbar:!0},n.a.createElement(F.a,null,n.a.createElement(C.a,{className:"nav-link-icon",to:"/",tag:h.a},n.a.createElement("i",{className:"ni ni-planet"}),n.a.createElement("span",{className:"nav-link-inner--text"},"Dashboard"))),n.a.createElement(F.a,null,n.a.createElement(C.a,{className:"nav-link-icon",to:"/auth/register",tag:h.a},n.a.createElement("i",{className:"ni ni-circle-08"}),n.a.createElement("span",{className:"nav-link-inner--text"},"Register"))),n.a.createElement(F.a,null,n.a.createElement(C.a,{className:"nav-link-icon",to:"/auth/login",tag:h.a},n.a.createElement("i",{className:"ni ni-key-25"}),n.a.createElement("span",{className:"nav-link-inner--text"},"Login"))),n.a.createElement(F.a,null,n.a.createElement(C.a,{className:"nav-link-icon",to:"/admin/user-profile",tag:h.a},n.a.createElement("i",{className:"ni ni-single-02"}),n.a.createElement("span",{className:"nav-link-inner--text"},"Profile"))))))))}}var He=Ue;class We extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null)}}var qe=We;class Je extends n.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,t)=>"/auth"===e.layout?n.a.createElement(c.a,{path:e.layout+e.path,component:e.component,key:t}):null)}componentDidMount(){document.body.classList.add("bg-default")}componentWillUnmount(){document.body.classList.remove("bg-default")}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"main-content"},n.a.createElement(He,null),n.a.createElement("div",{className:"header bg-gradient-info py-7 py-lg-8"},n.a.createElement(d.a,null,n.a.createElement("div",{className:"header-body text-center mb-7"},n.a.createElement(N.a,{className:"justify-content-center"},n.a.createElement(S.a,{lg:"5",md:"6"},n.a.createElement("h1",{className:"text-white"},"Welcome!"),n.a.createElement("p",{className:"text-lead text-light"},"Use these awesome forms to login or create new account in your project for free."))))),n.a.createElement("div",{className:"separator separator-bottom separator-skew zindex-100"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},n.a.createElement("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})))),n.a.createElement(d.a,{className:"mt--8 pb-5"},n.a.createElement(N.a,{className:"justify-content-center"},n.a.createElement(o.a,null,this.getRoutes(Le))))),n.a.createElement(qe,null))}}var Ge=Je;r.a.render(n.a.createElement(i.a,null,n.a.createElement(o.a,null,n.a.createElement(c.a,{path:"/admin",render:e=>n.a.createElement(Ke,e)}),n.a.createElement(c.a,{path:"/auth",render:e=>n.a.createElement(Ge,e)}),n.a.createElement(m.a,{from:"/",to:"/admin/index"}))),document.getElementById("root"))},82:function(e,t,a){e.exports=a.p+"static/media/sketch.e7c82e5c.jpg"}},[[247,1,2]]]);
//# sourceMappingURL=main.45f1c75b.chunk.js.map